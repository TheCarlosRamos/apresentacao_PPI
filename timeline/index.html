<div class="timeline-container">
    <h3>ETAPA:</h3>
    <div class="timeline">
        <div class="step" data-step="estudos">Estudos</div>
        <div class="step" data-step="consulta">Consulta Pública</div>
        <div class="step" data-step="tcu">TCU</div>
        <div class="step" data-step="edital">Edital</div>
        <div class="step" data-step="licitacao">Leilão</div>
        <div class="step" data-step="contrato">Assinatura do Contrato</div>
    </div>
</div>

<style>
.timeline-container {
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    width: 100%;
}

.timeline {
    display: flex;
    justify-content: space-between;
    position: relative;
    margin-top: 20px;
}

.timeline:before {
    content: "";
    position: absolute;
    top: 15px;
    left: 0;
    right: 0;
    height: 4px;
    background: #d7e3f5;
    z-index: 1;
}

.step {
    text-align: center;
    position: relative;
    width: 100%;
    font-size: 14px;
}

.step:before {
    content: "";
    width: 22px;
    height: 22px;
    background: white;
    border: 4px solid #d7e3f5;
    border-radius: 50%;
    display: block;
    margin: 0 auto 10px auto;
    position: relative;
    z-index: 2;
}

.step.active:before {
    background: #2e78ff;
    border-color: #86b4ff;
}
</style>

<script>
// Dados do projeto que você recebe
const projeto = {
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,  // EXEMPLO: consulta = 1 → deve marcar estudos e consulta
};

// Ordem das etapas
const ordem = [
    "estudos_situacao",
    "consulta_situacao",
    "tcu_situacao",
    "edital_situacao",
    "licitacao_situacao",
    "contrato_situacao"
];

// verifica o último índice que tem valor 1
let ultimoMarcado = -1;
ordem.forEach((etapa, index) => {
    if (projeto[etapa] === 1) ultimoMarcado = index;
});

// marca todas até o último marcado
document.querySelectorAll(".step").forEach((el, index) => {
    if (index <= ultimoMarcado) {
        el.classList.add("active");
    }
});
</script>
