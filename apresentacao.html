<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Acompanhamento de Projetos - PPI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: The SPA uses a dashboard-style, single-page layout with a fixed sidebar for sector navigation (Portos, Rodovias, Ferrovias, etc.). The main content area initially displays a high-level summary with key metrics across all projects and a chart showing project distribution by sector. Clicking a sector in the sidebar or on the chart dynamically filters and displays a grid of project summary cards for that sector. Each card shows the project name and its current status (visualized with a color-coded indicator). Clicking a card opens a modal window, revealing detailed information: a comprehensive description, a visual timeline of key milestones (Estudos, Leilão, Contrato), current status, next steps, and critical "Pontos de Atenção" (risks). This drill-down architecture was chosen to manage the high information density of the report, allowing users to move from a broad overview to specific project details in an intuitive, hierarchical manner, rather than being confronted with a long, unstructured scroll of text. This promotes exploration and makes complex project tracking more digestible. -->
    <!-- Visualization & Content Choices: 
- Report Info: Overall project portfolio status. Goal: Inform. Viz/Method: KPI cards (HTML/Tailwind) and a main Bar Chart (Chart.js) showing project counts per sector. Interaction: Clicking a sector on the chart or sidebar filters the project list. Justification: Provides an immediate high-level overview and entry point for exploration.
- Report Info: List of projects within each sector. Goal: Organize/Navigate. Viz/Method: A dynamic grid of project cards (HTML/Tailwind). Each card has a color-coded status indicator. Interaction: Filtering via search bar; clicking a card reveals details. Justification: Allows users to quickly scan projects and dive into specifics.
- Report Info: Project milestones and deadlines (EVTEA, AP, TCU, Edital, Leilão). Goal: Show Change/Process. Viz/Method: A horizontal timeline component built with HTML/CSS and Unicode icons (✅, ⏳). Interaction: Static visual for clarity. Justification: Visually represents the project lifecycle more effectively than a simple text list.
- Report Info: Physical progress percentages (e.g., FIOL railway). Goal: Inform. Viz/Method: HTML/CSS progress bars. Interaction: Static display. Justification: A standard and instantly understandable way to show completion.
- Report Info: "Pontos de Atenção" (risks). Goal: Alert/Inform. Viz/Method: A styled callout box with a warning icon. Interaction: Static text. Justification: Visually separates critical risk information from general status updates.
- Report Info: Financial data (Leilão results, investments). Goal: Inform. Viz/Method: Formatted text in KPI cards within the project detail view. Justification: Clear and direct presentation for key numbers. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root {
            --primary: #2E4E8C; /* azul PPI */
            --primary-dark: #243B6B;
            --primary-light: #3E5FA4;
            --accent-green: #2E7D32;
            --accent-yellow: #F7B500;
            --accent-red: #C62828;
        }

        
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: #4A4A4A;
            font-family: 'Inter', sans-serif;
        }
        /* Títulos sobre o fundo azul */
        #section-title { color: #FFFFFF; }
        #section-subtitle { color: #E5E7EB; }

        /* Harmonização dos utilitários mais usados com a paleta */
        .text-blue-500 { color: var(--primary) !important; }
        .text-blue-700 { color: var(--primary-dark) !important; }
        .bg-blue-100 { background-color: rgba(46, 78, 140, 0.12) !important; }
        .text-green-500 { color: var(--accent-green) !important; }
        .bg-green-100 { background-color: rgba(46, 125, 50, 0.12) !important; }
        .text-yellow-500 { color: var(--accent-yellow) !important; }
        .bg-yellow-100 { background-color: rgba(247, 181, 0, 0.12) !important; }

        /* Pontos de status alinhados à paleta */
        .status-dot.bg-blue-500 { background-color: var(--primary) !important; }
        .status-dot.bg-green-500 { background-color: var(--accent-green) !important; }
        .status-dot.bg-yellow-500 { background-color: var(--accent-yellow) !important; }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .modal-enter {
            animation: fadeIn 0.3s ease-out forwards;
        }
        .modal-leave {
            animation: fadeOut 0.3s ease-in forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }
        .status-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        /* Phase Timeline Styles */
        .phase-timeline {
            position: relative;
            margin: 2rem 0;
            padding: 0 1rem;
        }

        .phase-timeline--compact {
            margin: 1rem 0;
        }

        .phase-line {
            position: absolute;
            top: 16px;
            left: 0;
            right: 0;
            height: 4px;
            background-color: #e5e7eb;
            border-radius: 2px;
        }

        .phase-line-completed {
            position: absolute;
            top: 16px;
            left: 0;
            height: 4px;
            background-color: #10B981;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .phase-items {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 1;
        }

        .phase-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            min-width: 100px;
        }

        .phase-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #e5e7eb;
            border: 3px solid white;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .phase-dot.completed {
            background-color: #10B981 !important;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }

        .phase-dot.current {
            background-color: #3B82F6 !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            transform: scale(1.2);
        }

        .phase-label {
            margin-top: 0.5rem;
            font-size: 0.75rem;
            text-align: center;
            color: #6B7280;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .phase-label.completed {
            color: #10B981;
            font-weight: 600;
        }

        .phase-label.current {
            color: #3B82F6;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .phase-item {
                min-width: 60px;
            }
            
            .phase-label {
                font-size: 0.65rem;
            }
        }

        @media (max-width: 480px) {
            .phase-item {
                min-width: 40px;
            }
            
            .phase-label {
                font-size: 0.6rem;
                white-space: nowrap;
                transform: rotate(-45deg);
                transform-origin: top left;
                position: absolute;
                bottom: -30px;
                left: 50%;
                margin-left: -10px;
                width: 80px;
                text-align: left;
            }
        }
        
        /* Estilos para a tabela de projetos */
        .main-content {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        .projects-table-container {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .projects-table {
            min-width: 100%;
            table-layout: fixed;
        }
        
        .projects-table th,
        .projects-table td {
            vertical-align: top;
            padding: 0.75rem 1rem;
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            display: -moz-box;
            -moz-line-clamp: 2;
            -moz-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: 2.5em;
            line-height: 1.25em;
        }
        
        /* Estilos para a tabela de projetos */
        .projects-table-container {
            width: 100%;
            height: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .projects-table {
            width: 100%;
            table-layout: fixed;
            border-collapse: collapse;
        }
        
        .projects-table th,
        .projects-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            vertical-align: middle;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .projects-table th {
            background-color: #f9fafb;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: #6b7280;
        }
        
        .projects-table tbody tr:hover {
            background-color: #f9fafb;
        }
        
        .projects-table {
            width: 100%;
            table-layout: fixed;
            border-collapse: collapse;
        }
        
        .projects-table th,
        .projects-table td {
            vertical-align: middle;
            padding: 1rem 1.5rem;
        }
        
        /* Ajustes para dispositivos móveis */
        @media (max-width: 768px) {
            .projects-table th,
            .projects-table td {
                padding: 0.75rem 0.5rem;
                font-size: 0.875rem;
            }
            
            .projects-table th:first-child,
            .projects-table td:first-child {
                padding-left: 1rem;
            }
            
            .projects-table th:last-child,
            .projects-table td:last-child {
                padding-right: 1rem;
            }
        }
        
        /* Ajustes para barras de rolagem */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 1.25rem;
            bottom: -1.25rem;
            width: 2px;
            background-color: #D1D5DB;
            transform: translateX(-50%);
        }
        .timeline-item:first-child::before {
             top: 1.25rem;
             bottom: unset;
             height: calc(100% - 1.25rem);
        }
         .timeline-item:last-child::before {
             display: none;
        }
        .timeline-icon {
            z-index: 10;
        }
        /* Linha do tempo por fases (Estudos -> Assinatura) */
        .phase-timeline { 
            position: relative; 
            padding: 1rem 0;
        }
        .phase-line { 
            position: absolute; 
            top: 1.25rem; 
            left: 0.75rem; 
            right: 0.75rem; 
            height: 3px; 
            background: #E5E7EB;
            z-index: 1;
        }
        .phase-line-completed {
            background: #10B981;
            position: absolute;
            top: 1.25rem;
            left: 0.75rem;
            height: 3px;
            z-index: 2;
            transition: width 0.3s ease;
        }
        .phase-items { 
            display: grid; 
            grid-template-columns: repeat(6, 1fr); 
            align-items: start; 
            gap: 0;
            position: relative;
            z-index: 3;
        }
        .phase-item { 
            text-align: center; 
            position: relative; 
        }
        .phase-dot { 
            width: 22px; 
            height: 22px; 
            border-radius: 9999px; 
            background: #FFFFFF; 
            border: 3px solid #9CA3AF; 
            margin: 0 auto; 
            position: relative;
            z-index: 4;
            transition: all 0.3s ease;
        }
        .phase-dot.completed { 
            background: #10B981; 
            border-color: #10B981; 
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3);
        }
        .phase-label { 
            margin-top: 0.5rem; 
            font-size: 0.75rem; 
            color: #4B5563;
            font-weight: 500;
        }
        .phase-label.completed {
            color: #10B981;
            font-weight: 600;
        }
        .phase-meta { 
            margin-top: 0.25rem; 
            font-size: 0.7rem; 
            color: #6B7280; 
        }
        /* Variante compacta para cards da lista */
        .phase-timeline--compact .phase-line { 
            top: 0.9rem; 
            height: 2px; 
        }
        .phase-timeline--compact .phase-line-completed {
            top: 0.9rem;
            height: 2px;
        }
        .phase-timeline--compact .phase-dot { 
            width: 14px; 
            height: 14px; 
            border-width: 2px; 
        }
        .phase-timeline--compact .phase-label { 
            font-size: 0.65rem; 
        }
        .phase-note { 
            font-size: 0.75rem; 
            color: #4B5563; 
            margin-top: 0.5rem; 
            min-height: 1rem; 
        }
        /* Variante para modal: rótulos acima dos círculos e linha ajustada */
        .phase-timeline--modal .phase-line { top: 2.25rem; }
        .phase-label--top { margin-bottom: 0.5rem; margin-top: 0; }
        .phase-timeline--modal .phase-items { align-items: center; }
        .phase-arrow-row { text-align: center; font-size: 0.85rem; color: #374151; margin-bottom: 0.5rem; }

        /* Grade fixa para cards de informação no modal */
        .modal-info-grid { display: grid; gap: 1rem; }
        @media (min-width: 1280px) { /* xl */
            .modal-info-grid {
                grid-template-columns: 2fr 1.5fr 1.5fr;
                grid-auto-rows: minmax(140px, auto);
                grid-template-areas:
                    'descricao situacao mapa'
                    'descricao deliberacao mapa'
                    'progresso  riscos      mapa';
            }
            .card--descricao { grid-area: descricao; }
            .card--situacao { grid-area: situacao; }
            .card--deliberacao { grid-area: deliberacao; }
            .card--mapa { grid-area: mapa; }
            .card--riscos { grid-area: riscos; }
            .card--progresso { grid-area: progresso; }
        }

        /* Cartões da grade com borda */
        .project-card { border: 1px solid #E5E7EB; }
        .project-card:hover { border-color: var(--primary); }
        /* Reunião: melhorar painéis e sumário */
        details.meeting-item > summary { list-style: none; cursor: pointer; }
        details.meeting-item > summary::-webkit-details-marker { display: none; }
        details.meeting-item[open] { border-color: var(--primary-light); }
    
/* --- Correção para eliminar rolagem horizontal --- */
body, html {
    overflow-x: hidden !important;
}

main {
    width: 100%;
    overflow-x: hidden;
}

#projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* se ajusta ao tamanho da tela */
    gap: 1.5rem;
    width: 100%;
}

.project-card {
    width: 100%;
    max-width: none;
    box-sizing: border-box;
}

/* Garante que tudo se ajuste dentro da viewport */
* {
    max-width: 100%;
}

</style>
</head>
<body class="flex h-screen overflow-hidden">

    <aside class="w-64 bg-white shadow-lg flex-shrink-0 overflow-y-auto">
        <div class="p-6 border-b">
            <h1 class="text-2xl font-bold text-gray-800">Projetos PPI</h1>
            <p class="text-sm text-gray-500">Acompanhamento 2025</p>
        </div>
        <nav id="sidebar-nav" class="p-4">
        </nav>
    </aside>

    <main class="flex-1 overflow-y-auto p-6 md:p-10">
        <div id="overview-section">
        </div>
        
        <div class="mt-8">
            <h2 id="section-title" class="text-3xl font-bold text-gray-700 mb-2">Visão Geral</h2>
            <p id="section-subtitle" class="text-gray-500 mb-6">Explore os projetos de infraestrutura do Brasil.</p>
            <div id="projects-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6">
            </div>
        </div>
    </main>

    <div id="project-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-[95vw] max-w-7xl max-h-[90vh] overflow-y-auto relative transform transition-all duration-300">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition-colors">
                <i class="fas fa-times fa-lg"></i>
            </button>
            <div id="modal-body" class="p-8 md:p-12">
            </div>
        </div>
    </div>

<script>
    // Timeline data extracted from timeline.html
    window.allTimelineProjects = {
  "ecd74fa2-d64d-42ca-bb9a-a6dbe4dbfef5": {
    "guid": "ecd74fa2-d64d-42ca-bb9a-a6dbe4dbfef5",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "2º Leilão de Transmissão de Energia 2026"
  },
  "d9463ed7-caf9-44cf-812f-f9be35dfa3d2": {
    "guid": "d9463ed7-caf9-44cf-812f-f9be35dfa3d2",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "3º Ciclo de Oferta Permanente no regime de partilha"
  },
  "c5dd423a-0cfd-4e36-8fd9-03bb18dc250e": {
    "guid": "c5dd423a-0cfd-4e36-8fd9-03bb18dc250e",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Aeroporto Internacional de Viracopos, em Campinas/SP (relicitação)"
  },
  "f2811aa8-a620-4d91-bb8f-8ed1481a9a94": {
    "guid": "f2811aa8-a620-4d91-bb8f-8ed1481a9a94",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "5º leilão de óleo e gás da PPSA"
  },
  "022ea245-c8f4-440a-9a1b-2aa0e2f523fd": {
    "guid": "022ea245-c8f4-440a-9a1b-2aa0e2f523fd",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Apoio &#224; Visita&#231;&#227;o e &#224; Conserva&#231;&#227;o de &#225;rea de Fernando de Noronha/PE"
  },
  "3d228904-a18a-4f94-b5ef-710a2df6bcc2": {
    "guid": "3d228904-a18a-4f94-b5ef-710a2df6bcc2",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Antigo Aeroporto de Vit&#243;ria da Conquista"
  },
  "fbf64536-0ab5-49bd-8d69-d9d1dc145c7a": {
    "guid": "fbf64536-0ab5-49bd-8d69-d9d1dc145c7a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Api test 1"
  },
  "7f98f52b-0417-4a84-a60b-23104b8352e1": {
    "guid": "7f98f52b-0417-4a84-a60b-23104b8352e1",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "1º LEILÃO DE TRANSMISSÃO DE ENERGIA 2025"
  },
  "e2f2d536-8b26-4c34-ba6d-0d4e8993af3e": {
    "guid": "e2f2d536-8b26-4c34-ba6d-0d4e8993af3e",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Antigo Aeroporto Carlos Prates - Belo Horizonte/MG"
  },
  "33839d16-e8d5-4953-9106-6807bf9fb0f7": {
    "guid": "33839d16-e8d5-4953-9106-6807bf9fb0f7",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Antiga Estação Ferroviária de Diamantina/MG"
  },
  "5731cec4-2028-4351-8f6c-23301ef6ba4b": {
    "guid": "5731cec4-2028-4351-8f6c-23301ef6ba4b",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Aeroporto de Santos Dumont/RJ"
  },
  "8d2bfbb1-1ab5-43ec-bcb4-8b45c530455d": {
    "guid": "8d2bfbb1-1ab5-43ec-bcb4-8b45c530455d",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "&#193;reas do Centro de Instru&#231;&#227;o de Guerra na Selva do Ex&#233;rcito Brasileiro"
  },
  "90f37771-7341-47d3-afa5-a9816ba34054": {
    "guid": "90f37771-7341-47d3-afa5-a9816ba34054",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Aeroporto do Galeão/RJ"
  },
  "354cb321-88dd-49bc-9fb6-6afb08ccb261": {
    "guid": "354cb321-88dd-49bc-9fb6-6afb08ccb261",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "5º Ciclo de Oferta Permanente no regime de concessão"
  },
  "bdd8bd47-218f-445f-a795-72eefc900b3c": {
    "guid": "bdd8bd47-218f-445f-a795-72eefc900b3c",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "1º Leilão de Transmissão de Energia 2026"
  },
  "83410882-d8f2-4f75-a3ef-1d260041f508": {
    "guid": "83410882-d8f2-4f75-a3ef-1d260041f508",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-116/BA/PE - Rota dos Sert&#245;es"
  },
  "a16279f3-1118-49bf-87ac-203e9d49d4fe": {
    "guid": "a16279f3-1118-49bf-87ac-203e9d49d4fe",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem do Po&#231;o do Magro (Codeasf)"
  },
  "344d2b96-3348-41d9-a477-64ca11b44b2b": {
    "guid": "344d2b96-3348-41d9-a477-64ca11b44b2b",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Baixo Acara&#250;/CE"
  },
  "705bc6a1-682d-44ad-bfd2-3a8260687487": {
    "guid": "705bc6a1-682d-44ad-bfd2-3a8260687487",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-060/364/GO/MT - CN2 - Rota do Agro"
  },
  "e7ea53ca-5a51-4387-9719-c02f84feafd2": {
    "guid": "e7ea53ca-5a51-4387-9719-c02f84feafd2",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "CODEBA e Portos Organizados de Salvador, Aratu-Candeias e Ilhéus"
  },
  "ad90c00e-f42d-4417-b3ee-eba9b77c326a": {
    "guid": "ad90c00e-f42d-4417-b3ee-eba9b77c326a",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "nome_projeto": "Cons&#243;rcio CONSUD"
  },
  "56e91a40-09ed-4e76-84f8-6ad7119a3ba5": {
    "guid": "56e91a40-09ed-4e76-84f8-6ad7119a3ba5",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-116/158/392/290/RS - Rota Integração do Sul"
  },
  "de84ed77-2133-411e-8a18-7c647c0e999d": {
    "guid": "de84ed77-2133-411e-8a18-7c647c0e999d",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "BR-060/153/040/DF/GO (relicitação)"
  },
  "8d191d82-7d1e-47d9-9f25-a580984292ad": {
    "guid": "8d191d82-7d1e-47d9-9f25-a580984292ad",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-070/174/364/MT/RO - CN3 - Rota Agro Central"
  },
  "95ba3705-8488-460a-a02a-7f408dba33a3": {
    "guid": "95ba3705-8488-460a-a02a-7f408dba33a3",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-101/ES/BA (Otimização ECO101)"
  },
  "c9b9363d-d6c8-4e33-8d4b-3f27312a0f37": {
    "guid": "c9b9363d-d6c8-4e33-8d4b-3f27312a0f37",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "CBTU - estudos de mobilidade das praças de Natal, João Pessoa e Maceió"
  },
  "453744dc-0465-4c51-b331-1d441f71c87e": {
    "guid": "453744dc-0465-4c51-b331-1d441f71c87e",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragens da Codevasf"
  },
  "7d8495bd-6f12-4ecd-bb15-eac57721af9f": {
    "guid": "7d8495bd-6f12-4ecd-bb15-eac57721af9f",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem de Zabumb&#227;o (Codevasf)"
  },
  "1244649e-5a92-4d13-b21f-cea81fc2a75f": {
    "guid": "1244649e-5a92-4d13-b21f-cea81fc2a75f",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "BR-158/155/MT/PA"
  },
  "52941c04-f840-4517-934d-d12418bf4cd2": {
    "guid": "52941c04-f840-4517-934d-d12418bf4cd2",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem de Riacho do Paulo (DNOCS)"
  },
  "4ec9c8f4-6447-4d18-ac99-ff137740a60c": {
    "guid": "4ec9c8f4-6447-4d18-ac99-ff137740a60c",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio CEMMIL/SP"
  },
  "01fb8247-91ec-4631-bf1f-3da9fa6822d6": {
    "guid": "01fb8247-91ec-4631-bf1f-3da9fa6822d6",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-116/324/BA - Rota 2 de julho"
  },
  "73cfd5fb-20f9-43a9-b39f-89be0ea9caa5": {
    "guid": "73cfd5fb-20f9-43a9-b39f-89be0ea9caa5",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Canal de Acesso Aquaviário aos Portos de Paranaguá e Antonina/PR"
  },
  "7a4da49f-e374-4f2a-b3e0-27af466e1cf9": {
    "guid": "7a4da49f-e374-4f2a-b3e0-27af466e1cf9",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem de Truvisco (DNOCS)"
  },
  "17e819cb-1962-4905-8306-c57ba90b182a": {
    "guid": "17e819cb-1962-4905-8306-c57ba90b182a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem de Morrinhos (DNOCS)"
  },
  "a7317046-c49d-4e61-835b-2f23dded1972": {
    "guid": "a7317046-c49d-4e61-835b-2f23dded1972",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-101/RJ (Otimização da Autopista Fluminense)"
  },
  "743c3dec-0596-4049-972b-7ad1e0fb5850": {
    "guid": "743c3dec-0596-4049-972b-7ad1e0fb5850",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-116/251/MG - Rota das Gerais"
  },
  "55d8c9d7-c8ea-4140-8e03-0fb8486ca603": {
    "guid": "55d8c9d7-c8ea-4140-8e03-0fb8486ca603",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-040/495/RJ/MG - Rio de Janeiro a Juiz de Fora"
  },
  "03175202-1983-4ce9-9425-f8271bf2e138": {
    "guid": "03175202-1983-4ce9-9425-f8271bf2e138",
    "estudos_situacao": 1,
    "contrato_situacao": 1,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Canal de Acesso Aquaviário do Porto de Rio Grande/RS"
  },
  "a93af4fb-d039-4fad-9454-cb0aabe6b5b8": {
    "guid": "a93af4fb-d039-4fad-9454-cb0aabe6b5b8",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "BR-135/316/MA"
  },
  "8b14d8de-328d-42a2-873c-3d40b1691fb8": {
    "guid": "8b14d8de-328d-42a2-873c-3d40b1691fb8",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-163/MS (Otimização MSVIA)"
  },
  "e3ddb823-bab9-4a3d-92db-a9729c694a30": {
    "guid": "e3ddb823-bab9-4a3d-92db-a9729c694a30",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-153/262/GO/MG - Rota Sertaneja"
  },
  "68cd547a-9395-4439-a85b-27e0e21c58c4": {
    "guid": "68cd547a-9395-4439-a85b-27e0e21c58c4",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "CBTU-PE: Metrô da Região Metropolitana de Recife/PE"
  },
  "b17b954e-52d0-4f06-8865-4f18855bac72": {
    "guid": "b17b954e-52d0-4f06-8865-4f18855bac72",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "BR-163/267/MS (Relicitação)"
  },
  "8adf1926-f1f9-493a-b03b-378bd86f260f": {
    "guid": "8adf1926-f1f9-493a-b03b-378bd86f260f",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragens do DNOCS"
  },
  "ab80c9e8-07f2-46ea-92d0-e32fda3ab48e": {
    "guid": "ab80c9e8-07f2-46ea-92d0-e32fda3ab48e",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem de Tremedal (DNOCS)"
  },
  "c33de432-98e8-415a-8920-c714218836cb": {
    "guid": "c33de432-98e8-415a-8920-c714218836cb",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Canal de Acesso Aquavi&#225;rio ao Porto de Santos"
  },
  "715eae06-4ef0-488f-acc4-7e0ba1e1df67": {
    "guid": "715eae06-4ef0-488f-acc4-7e0ba1e1df67",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Barragem do Bico da Pedra (Codevasf)"
  },
  "b3ee4629-b976-4d12-af02-593245102cf7": {
    "guid": "b3ee4629-b976-4d12-af02-593245102cf7",
    "estudos_situacao": 0,
    "contrato_situacao": 1,
    "licitacao_situacao": 0,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Consórcio de Municípios do Centro Oeste Mineiro - CIAS"
  },
  "8587a771-a713-4b0d-bdaa-594649c26413": {
    "guid": "8587a771-a713-4b0d-bdaa-594649c26413",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Educação Infantil - Município de Caxias do Sul (RS)"
  },
  "14f610c7-8be2-4beb-859f-72b12789ca18": {
    "guid": "14f610c7-8be2-4beb-859f-72b12789ca18",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio de Saúde do Vale do Ribeira e Litoral Sul - CONSAÚDE/SP"
  },
  "956ec97e-db52-4ce3-8af9-6a602bb16fdc": {
    "guid": "956ec97e-db52-4ce3-8af9-6a602bb16fdc",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio Público dos Municípios da Mata Sul - COMSUL/PE"
  },
  "dbfad300-3196-4119-8282-6cef42d22fae": {
    "guid": "dbfad300-3196-4119-8282-6cef42d22fae",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio Regional de Saneamento Básico Central de Minas - CORESAB"
  },
  "9261c511-63fa-40f2-a53b-3fa5bf650eab": {
    "guid": "9261c511-63fa-40f2-a53b-3fa5bf650eab",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Corredor Ferroviário Leste-Oeste"
  },
  "43cd2f4b-7147-458d-be96-863ad3d35a00": {
    "guid": "43cd2f4b-7147-458d-be96-863ad3d35a00",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Consórcio Oeste Paulista"
  },
  "47f8bb42-bbe9-4f12-822d-713277736d71": {
    "guid": "47f8bb42-bbe9-4f12-822d-713277736d71",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Consórcio Mogiana"
  },
  "758a265e-9adc-482b-a14a-f1a3bd882087": {
    "guid": "758a265e-9adc-482b-a14a-f1a3bd882087",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio Sustentável do Território do São Francisco - CONSTESF/BA"
  },
  "be0f9e32-9781-4427-9cbf-4323e661ee13": {
    "guid": "be0f9e32-9781-4427-9cbf-4323e661ee13",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio Intermunicipal de Des. Sust. da Serra Gaúcha - CISGA"
  },
  "c5dc668b-99c8-4495-a40e-b95bc49448c1": {
    "guid": "c5dc668b-99c8-4495-a40e-b95bc49448c1",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Consórcio CI Centro"
  },
  "f9a33179-1540-4b88-8282-837a0e2bdb4b": {
    "guid": "f9a33179-1540-4b88-8282-837a0e2bdb4b",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio do Sertão do Araripe Pernambucano - CISAPE/PE"
  },
  "5b502d2f-fdc4-47ff-82ce-1787fa991606": {
    "guid": "5b502d2f-fdc4-47ff-82ce-1787fa991606",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio de Saneamento da Bacia Hidrográfica do Rio dos Sinos/RS"
  },
  "4d24370c-ef9f-4e88-9e39-28c490db2d05": {
    "guid": "4d24370c-ef9f-4e88-9e39-28c490db2d05",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Direitos Minerários de Caulim em Rio Capim/PA"
  },
  "b4bc3470-79d3-410f-b838-aa5cf18f381a": {
    "guid": "b4bc3470-79d3-410f-b838-aa5cf18f381a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio do Agreste PE e Fronteiras - CONIAPE/PE"
  },
  "11627d9d-fafa-4874-b565-6b1a7a1c51d8": {
    "guid": "11627d9d-fafa-4874-b565-6b1a7a1c51d8",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Direitos Minerários de Carvão em Candiota/RS"
  },
  "cf9dc634-599e-4050-96b7-7ecd8d07734b": {
    "guid": "cf9dc634-599e-4050-96b7-7ecd8d07734b",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Distribuição de água e tratamento de esgotos-Arapiraca-Bloco D Alagoas"
  },
  "7f860e6a-2afa-4282-ad24-8df915d656ab": {
    "guid": "7f860e6a-2afa-4282-ad24-8df915d656ab",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Consórcio de Des. Sust. do Triângulo Mineiro e Alto Paranaíba-CIDES/MG"
  },
  "ca14fd28-c4c2-460e-8d2f-9db7d192565f": {
    "guid": "ca14fd28-c4c2-460e-8d2f-9db7d192565f",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Educação Infantil - Consórcio Intermunicipal CIM-AMFRI"
  },
  "03476266-e9a1-4821-8179-8abd15903f7b": {
    "guid": "03476266-e9a1-4821-8179-8abd15903f7b",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "EF-277 - Estrada de Ferro Paraná Oeste - Ferroeste"
  },
  "74c02f8a-2630-4d27-901a-3f097aa9fcc8": {
    "guid": "74c02f8a-2630-4d27-901a-3f097aa9fcc8",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Consórcio CDS Litoral Sul (BA)"
  },
  "47fe6ece-74b6-4c8b-b835-43286ef737c0": {
    "guid": "47fe6ece-74b6-4c8b-b835-43286ef737c0",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "FTL - Ferrovia Transnordestina Logística S.A."
  },
  "1b99e966-1b88-4bf6-a15a-087846ca2339": {
    "guid": "1b99e966-1b88-4bf6-a15a-087846ca2339",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Estudos para concessão de 1.600 km de rodovias"
  },
  "d0fe2313-19a2-4a22-be33-08e5166b4403": {
    "guid": "d0fe2313-19a2-4a22-be33-08e5166b4403",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - IP Joinville (SC)"
  },
  "b532914d-19ea-473b-bf11-e5ec436ac1f4": {
    "guid": "b532914d-19ea-473b-bf11-e5ec436ac1f4",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Esgotamento Sanitário - Volta Redonda/RJ"
  },
  "6e5a93b6-154f-4c26-8a0d-1736a7795980": {
    "guid": "6e5a93b6-154f-4c26-8a0d-1736a7795980",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Camaçari (BA)"
  },
  "70cd0711-dd07-4560-9e0c-94e137aaf873": {
    "guid": "70cd0711-dd07-4560-9e0c-94e137aaf873",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Consórcio Cimpajeú (PE)"
  },
  "9fd6f3dc-03f7-49df-b7f7-b5574d34b848": {
    "guid": "9fd6f3dc-03f7-49df-b7f7-b5574d34b848",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Consórcio CISAMAVI (SC)"
  },
  "c26d3a52-7554-4f45-93ab-721862bf9091": {
    "guid": "c26d3a52-7554-4f45-93ab-721862bf9091",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Porto Seguro (BA)"
  },
  "83e93725-6e10-4b73-9d6f-f264d5e8d378": {
    "guid": "83e93725-6e10-4b73-9d6f-f264d5e8d378",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Valparaíso de Goiás (GO)"
  },
  "e09fcf6f-2942-4621-b08b-4bde2021ff1a": {
    "guid": "e09fcf6f-2942-4621-b08b-4bde2021ff1a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Maranguape (CE)"
  },
  "ca3d8c8e-9551-47fd-9812-faf4a83b663a": {
    "guid": "ca3d8c8e-9551-47fd-9812-faf4a83b663a",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Timon (MA)"
  },
  "d5dd73b3-ddbb-4ece-a8e9-24c7a08cc5c1": {
    "guid": "d5dd73b3-ddbb-4ece-a8e9-24c7a08cc5c1",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - São José dos Pinhais (PR)"
  },
  "c2862786-45eb-4a2c-8e6d-3ad78ef15a8d": {
    "guid": "c2862786-45eb-4a2c-8e6d-3ad78ef15a8d",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Santo Antônio de Jesus (BA)"
  },
  "171582bb-1a48-4a92-afe3-8b885af237e8": {
    "guid": "171582bb-1a48-4a92-afe3-8b885af237e8",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Gravataí (RS)"
  },
  "8c14418c-98ab-45d4-919f-24dddc0be03a": {
    "guid": "8c14418c-98ab-45d4-919f-24dddc0be03a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Colatina (ES)"
  },
  "3cc782fb-74a8-4ff2-8c65-64a6c28c739a": {
    "guid": "3cc782fb-74a8-4ff2-8c65-64a6c28c739a",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Hidrovia do Rio Madeira"
  },
  "6e4fe371-5274-402f-bc51-4cb35f898060": {
    "guid": "6e4fe371-5274-402f-bc51-4cb35f898060",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "ITG03 - Terminal  de granéis minerais sólidos no Porto de Itaguaí/RJ"
  },
  "18aa7747-5c68-4d1d-9ffb-8883b23ac5f5": {
    "guid": "18aa7747-5c68-4d1d-9ffb-8883b23ac5f5",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "ILH01 - Terminal múltiplo uso no Porto de Ilhéus/BA"
  },
  "6ffaa27b-41f1-49cd-acba-4ade7bbe9f90": {
    "guid": "6ffaa27b-41f1-49cd-acba-4ade7bbe9f90",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Hospital Universitário de Canoas/RS"
  },
  "7e46d891-720e-48ff-bb15-c2ca910ae463": {
    "guid": "7e46d891-720e-48ff-bb15-c2ca910ae463",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Habitação para Locação Social - Recife/PE"
  },
  "61765de5-03d1-44dd-b783-da346bd30963": {
    "guid": "61765de5-03d1-44dd-b783-da346bd30963",
    "estudos_situacao": 0,
    "contrato_situacao": 1,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Fortaleza de Santa Cruz (Forte Orange), no Estado de Pernambuco"
  },
  "d5b67959-aa00-4ac7-97bd-b0d3c01ace0b": {
    "guid": "d5b67959-aa00-4ac7-97bd-b0d3c01ace0b",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Ferrovia EF-170/MT/PA (Ferrogrão)"
  },
  "7aa3c61e-ff19-4804-ad09-7515d969c1f4": {
    "guid": "7aa3c61e-ff19-4804-ad09-7515d969c1f4",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "IQI14 - Terminal de Combustíveis no Porto de Itaqui/MA"
  },
  "fe42f0b2-f4b9-4518-94ce-bb1f73434379": {
    "guid": "fe42f0b2-f4b9-4518-94ce-bb1f73434379",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Fazenda Pau D\'Alho, localizada no estado de São Paulo"
  },
  "5834280d-f76d-45c3-9d4b-c223179d9c9e": {
    "guid": "5834280d-f76d-45c3-9d4b-c223179d9c9e",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Floresta Nacional de Brasília/DF"
  },
  "edd8e91e-71c1-4658-8cb9-9de6cae06522": {
    "guid": "edd8e91e-71c1-4658-8cb9-9de6cae06522",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Educação Infantil - Município do Recife/PE"
  },
  "21d6e900-f6d0-4984-9856-1ae601d3b0ad": {
    "guid": "21d6e900-f6d0-4984-9856-1ae601d3b0ad",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Eficientiza&#231;ao Energ&#233;tica - Pal&#225;cios do Governo Federal"
  },
  "dd8b3b0e-6b00-4245-9578-70c4ae356d45": {
    "guid": "dd8b3b0e-6b00-4245-9578-70c4ae356d45",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - São Pedro da Aldeia (RJ)"
  },
  "6b39afed-0f54-4394-9f9e-9f035c18d4b4": {
    "guid": "6b39afed-0f54-4394-9f9e-9f035c18d4b4",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Saquarema (RJ)"
  },
  "a87b1857-97e6-48b8-9ee7-72061e7b5b3c": {
    "guid": "a87b1857-97e6-48b8-9ee7-72061e7b5b3c",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Iluminação Pública - Francisco Beltrão (PR)"
  },
  "42887213-1969-471b-8f23-b3fcfb382fd5": {
    "guid": "42887213-1969-471b-8f23-b3fcfb382fd5",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "IQI16 – Terminal de granel sólido mineral no Porto de Itaqui/MA"
  },
  "54506e95-c2d9-4a74-b70c-99f379c6b432": {
    "guid": "54506e95-c2d9-4a74-b70c-99f379c6b432",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Hidrovia de Lagoa Mirim e do Canal de São Gonçalo/RS"
  },
  "7fa72dfe-7f6b-4e1a-bd47-3b525725246a": {
    "guid": "7fa72dfe-7f6b-4e1a-bd47-3b525725246a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Hidrovia do Tocantins"
  },
  "3bfaea01-7c1e-400c-9fe2-df6f406edce8": {
    "guid": "3bfaea01-7c1e-400c-9fe2-df6f406edce8",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Ferrovia Centro Atlântico S.A. - FCA"
  },
  "4c2b7f32-e418-4926-8bf0-d91e3f81bfcb": {
    "guid": "4c2b7f32-e418-4926-8bf0-d91e3f81bfcb",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "FTC - Ferrovia Tereza Cristina S.A."
  },
  "85f471ce-4876-403e-a401-9e0eedd5f358": {
    "guid": "85f471ce-4876-403e-a401-9e0eedd5f358",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Habitação para Locação Social - Campo Grande/MS"
  },
  "c696a4bf-f8eb-486f-9cb5-673629bbbf95": {
    "guid": "c696a4bf-f8eb-486f-9cb5-673629bbbf95",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Etapas 3 e 4 do Projeto de Irrigação Jaíba/MG"
  },
  "350f8fce-2b7c-457d-831a-d005c3a6764d": {
    "guid": "350f8fce-2b7c-457d-831a-d005c3a6764d",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - São Félix do Xingu (PA)"
  },
  "a6bbd1ae-29cd-4fcb-9408-e1f3f99a6c60": {
    "guid": "a6bbd1ae-29cd-4fcb-9408-e1f3f99a6c60",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Fortaleza de Santa Catarina, localizada no Estado da Paraíba"
  },
  "bf3ca782-808c-4976-8571-669b139f6eb2": {
    "guid": "bf3ca782-808c-4976-8571-669b139f6eb2",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Floresta Nacional de Ipanema/SP"
  },
  "1665c3f7-da9e-414c-b03a-4230d321cde9": {
    "guid": "1665c3f7-da9e-414c-b03a-4230d321cde9",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Iluminação Pública - Nova Friburgo (RJ)"
  },
  "ee900869-0557-47a0-8fb4-cfe20c03b738": {
    "guid": "ee900869-0557-47a0-8fb4-cfe20c03b738",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "nome_projeto": "Manejo Sustent&#225;vel na Flona de Mulata/PA"
  },
  "afa5c377-0d31-492c-8ca4-54df7f73c284": {
    "guid": "afa5c377-0d31-492c-8ca4-54df7f73c284",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Iluminação Pública - Vitória de Santo Antão (PE)"
  },
  "98b53504-4b6a-4df5-ae4b-1482a73804c2": {
    "guid": "98b53504-4b6a-4df5-ae4b-1482a73804c2",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "PPP Novo Hospital do GHC"
  },
  "9ad5d137-101e-40ec-8413-3f5cbfd3bf01": {
    "guid": "9ad5d137-101e-40ec-8413-3f5cbfd3bf01",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Leil&#227;o de Reserva de Capacidade, na forma de Pot&#234;ncia, de 2026"
  },
  "4b423463-877c-4867-b94b-2083d8972cc6": {
    "guid": "4b423463-877c-4867-b94b-2083d8972cc6",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Leilão de Energia Nova \\"
  },
  "decb098a-6db6-434e-9590-f2439f6994b7": {
    "guid": "decb098a-6db6-434e-9590-f2439f6994b7",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "PISF - Projeto de Integração do Rio São Francisco"
  },
  "858076ed-4fba-44fc-8b6d-055c2a8011cd": {
    "guid": "858076ed-4fba-44fc-8b6d-055c2a8011cd",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "MAC14 - Terminal para toras e cavaco de madeira no Porto de Maceió/AL"
  },
  "a70d583a-fe42-44f1-8637-1ab219889a70": {
    "guid": "a70d583a-fe42-44f1-8637-1ab219889a70",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Museu Marítimo do Brasil"
  },
  "96f67bdb-0e8c-4e40-ae00-cf717da5e633": {
    "guid": "96f67bdb-0e8c-4e40-ae00-cf717da5e633",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Manejo Sustent&#225;vel na Flona de Anau&#225;"
  },
  "913ebfc5-dbff-4617-98b7-f2123d80cd6f": {
    "guid": "913ebfc5-dbff-4617-98b7-f2123d80cd6f",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "PAR15 - Terminal de granel vegetal no Porto de Paranaguá/PR"
  },
  "07fb13d8-0616-41f8-ab50-99c1c6669fd7": {
    "guid": "07fb13d8-0616-41f8-ab50-99c1c6669fd7",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "POA26 - Terminal de cargas multipropósito no Porto de Porto Alegre/RS"
  },
  "4a9e98e6-ec2e-4131-bd7f-e25a3530c678": {
    "guid": "4a9e98e6-ec2e-4131-bd7f-e25a3530c678",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Operação de Voos Panorâmicos - Parque Nacional do Iguaçu/PR"
  },
  "74d5752e-fd5d-4962-a848-b13a8b56bece": {
    "guid": "74d5752e-fd5d-4962-a848-b13a8b56bece",
    "estudos_situacao": 0,
    "contrato_situacao": 1,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "PAR03 - granéis sólidos minerais Porto de Paranaguá/PR"
  },
  "a6643220-971e-4868-be0f-cecc6b79cef3": {
    "guid": "a6643220-971e-4868-be0f-cecc6b79cef3",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Malha Oeste (relicitação)"
  },
  "e7878efe-a724-4965-928d-d0ffbea1929f": {
    "guid": "e7878efe-a724-4965-928d-d0ffbea1929f",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Lotes Nordeste"
  },
  "22044c07-aa2f-42ee-9331-2628dc64fc6a": {
    "guid": "22044c07-aa2f-42ee-9331-2628dc64fc6a",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "NAT01 - terminal de graneis s&#243;lidos minerais no porto de Natal"
  },
  "32062dec-f6dd-4728-a751-33d810db8921": {
    "guid": "32062dec-f6dd-4728-a751-33d810db8921",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "POA01 - Terminal de granel sólido vegetal no Porto de Porto Alegre/RS"
  },
  "2cad717e-cba2-4998-8eda-2b0a0af28641": {
    "guid": "2cad717e-cba2-4998-8eda-2b0a0af28641",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "MUC03 - Terminal de Granel Sólido do Porto do Mucuripe/CE"
  },
  "714677e9-777b-42d2-99a1-a25823a6c556": {
    "guid": "714677e9-777b-42d2-99a1-a25823a6c556",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Imóveis não operacionais da CEASAMINAS"
  },
  "5cf20be4-cb5b-457d-9f2f-16f08041dbac": {
    "guid": "5cf20be4-cb5b-457d-9f2f-16f08041dbac",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Leilão de Reserva de Capacidade de Potencia – Armazenamento   Baterias"
  },
  "8c70887b-fd2d-4d28-8fb0-eb2d61a78c8a": {
    "guid": "8c70887b-fd2d-4d28-8fb0-eb2d61a78c8a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Palacete Carvalho Motta - Fortaleza/CE"
  },
  "4226a865-eb3a-458a-8d9e-5325c4e72954": {
    "guid": "4226a865-eb3a-458a-8d9e-5325c4e72954",
    "estudos_situacao": 1,
    "contrato_situacao": 1,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Manejo Sustent&#225;vel na Flona do Tapirap&#233;-Aquiri/PA"
  },
  "7779bcee-3fe1-41f6-9b4b-5b1fd84b2989": {
    "guid": "7779bcee-3fe1-41f6-9b4b-5b1fd84b2989",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "MUC59 - Terminal de granel líquido no Porto de Mucuripe/CE"
  },
  "27e366d0-bbce-4b04-9d0d-bc66d0f3482c": {
    "guid": "27e366d0-bbce-4b04-9d0d-bc66d0f3482c",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "PAR14 - Terminal de granel vegetal no Porto de Paranaguá/PR"
  },
  "55bc53d9-5f86-4b59-9e82-fdd2c110faf0": {
    "guid": "55bc53d9-5f86-4b59-9e82-fdd2c110faf0",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "MUC04 - Terminal de contêineres no Porto de Fortaleza/CE"
  },
  "4a6169ec-387d-48e7-a14a-451e59b97f31": {
    "guid": "4a6169ec-387d-48e7-a14a-451e59b97f31",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "MCP01 - Terminal para cavaco de madeira no Porto de Santana/AP"
  },
  "eb6eb6bd-cdaf-445d-8a4d-2736f7cef193": {
    "guid": "eb6eb6bd-cdaf-445d-8a4d-2736f7cef193",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Instituto Nacional do Câncer - INCA"
  },
  "2256fe19-a38f-4050-851c-23ab4d8f8dad": {
    "guid": "2256fe19-a38f-4050-851c-23ab4d8f8dad",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Irrigação da Zona de Influência do Canal Adutor do Sertão Alagoano"
  },
  "e7eaec7b-30b7-4f7c-9334-6b4b6ea5df70": {
    "guid": "e7eaec7b-30b7-4f7c-9334-6b4b6ea5df70",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Leilão de Suprimento aos sistemas Isolados"
  },
  "59ea1432-1bd8-4574-870e-5b183a174340": {
    "guid": "59ea1432-1bd8-4574-870e-5b183a174340",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Museu Histórico do Exército Brasileiro e Forte de Copacabana"
  },
  "1acf47a4-2d59-47a6-b2ac-390b33984d2f": {
    "guid": "1acf47a4-2d59-47a6-b2ac-390b33984d2f",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Parque Nacional da Serra da Bodoquena /MS"
  },
  "44cd4078-42b0-4a83-8955-efa31cdb2130": {
    "guid": "44cd4078-42b0-4a83-8955-efa31cdb2130",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Platôs de Guadalupe/PI"
  },
  "464b9e5c-896c-4b9b-a33f-c07e26209911": {
    "guid": "464b9e5c-896c-4b9b-a33f-c07e26209911",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Parque Nacional do Caparaó/MG/ES"
  },
  "75b94094-15f2-4631-b2e5-6c922d59e162": {
    "guid": "75b94094-15f2-4631-b2e5-6c922d59e162",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "RDJ10 -Terminal de cargas gerais  no Porto do Rio de Janeiro/RJ"
  },
  "aff145d8-d9d6-4a40-87a9-0e75318cadf0": {
    "guid": "aff145d8-d9d6-4a40-87a9-0e75318cadf0",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Porto Organizado de Itajaí/SC"
  },
  "6c193c44-0387-4409-88f7-7434ce1ee7c2": {
    "guid": "6c193c44-0387-4409-88f7-7434ce1ee7c2",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Res&#237;duos S&#243;lidos Urbano - Estado do Amap&#225;"
  },
  "7c320630-e604-473f-8bdc-9dd3c60a0a98": {
    "guid": "7c320630-e604-473f-8bdc-9dd3c60a0a98",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "REC04 - Terminal de granel sólido e carga geral no Porto de Recife/PE"
  },
  "84527695-dd24-42bc-a8db-a5e8830a4eaf": {
    "guid": "84527695-dd24-42bc-a8db-a5e8830a4eaf",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Restaura&#231;&#227;o Florestal na Rebio Nascentes da Serra do Cachimbo/PA"
  },
  "651a153a-1a68-46dd-b985-27d4e7a14fe6": {
    "guid": "651a153a-1a68-46dd-b985-27d4e7a14fe6",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Presídio - Estado de Santa Catarina"
  },
  "90a36e6f-baa2-4773-ab9d-0118b97f7ccb": {
    "guid": "90a36e6f-baa2-4773-ab9d-0118b97f7ccb",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Rodovias Integradas do Paraná - lote 4"
  },
  "b09ae85e-186a-4bf9-9fa6-1767ae6f582b": {
    "guid": "b09ae85e-186a-4bf9-9fa6-1767ae6f582b",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "RDJ07 - Terminal de apoio offshore no Porto do Rio de Janeiro/RJ"
  },
  "153a704a-193b-4275-be55-14e7f5dfc7f3": {
    "guid": "153a704a-193b-4275-be55-14e7f5dfc7f3",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Restaura&#231;&#227;o Florestal na Flona de Itaituba II/PA"
  },
  "5a877046-b488-496a-870d-60bc12c7a02d": {
    "guid": "5a877046-b488-496a-870d-60bc12c7a02d",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Restaura&#231;&#227;o Florestal no Parna da Serra do Pardo/PA"
  },
  "30669a87-2299-40d5-8d0a-3dbc127720e1": {
    "guid": "30669a87-2299-40d5-8d0a-3dbc127720e1",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Rumo - Malha Sul"
  },
  "191a04ea-53d0-48ae-a139-b4b94bc569f1": {
    "guid": "191a04ea-53d0-48ae-a139-b4b94bc569f1",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Projeto Poço Transparente"
  },
  "d98588a1-06ee-4424-998a-47280cfdcb17": {
    "guid": "d98588a1-06ee-4424-998a-47280cfdcb17",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "RIG25 – Terminal de granel líquido no Porto de Rio Grande/RS"
  },
  "4211d891-42fc-4146-8380-ffb95a60eb7e": {
    "guid": "4211d891-42fc-4146-8380-ffb95a60eb7e",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Restaura&#231;&#227;o Florestal no Parna dos Campos Amaz&#244;nicos/AM/MT/RO"
  },
  "0d1dbb0e-ba78-45d3-87b0-2b27bf0708aa": {
    "guid": "0d1dbb0e-ba78-45d3-87b0-2b27bf0708aa",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "RDJ06A - Terminal de granel líquido no Porto do Rio de Janeiro/RJ"
  },
  "f064cc2f-470e-4bfa-bdb8-9ec3e1ee88db": {
    "guid": "f064cc2f-470e-4bfa-bdb8-9ec3e1ee88db",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Projeto Santa Brígida"
  },
  "734bc6af-77a2-4447-a967-ce5143be0e6c": {
    "guid": "734bc6af-77a2-4447-a967-ce5143be0e6c",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Rodovias de Santa Catarina"
  },
  "c2c9e296-6790-49b0-bc64-8d22e51de904": {
    "guid": "c2c9e296-6790-49b0-bc64-8d22e51de904",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "nome_projeto": "Restaura&#231;&#227;o Florestal na Flona de Altamira/PA"
  },
  "d71f7fad-3824-411b-9747-35cdb603747e": {
    "guid": "d71f7fad-3824-411b-9747-35cdb603747e",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Parque Nacional de Brasília/DF"
  },
  "9010ae8c-9060-43b2-8c93-7ef86e02b192": {
    "guid": "9010ae8c-9060-43b2-8c93-7ef86e02b192",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Parque Nacional da Serra dos Órgãos/RJ"
  },
  "9e65bed1-a689-4502-be7a-d9478e64cc21": {
    "guid": "9e65bed1-a689-4502-be7a-d9478e64cc21",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Parque Nacional de Anavilhanas/AM"
  },
  "218fbb22-0e18-43df-bf17-5450bdd3c0dc": {
    "guid": "218fbb22-0e18-43df-bf17-5450bdd3c0dc",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Projeto Pontal - Mancha 20"
  },
  "b86af630-941d-43a4-9f77-8968311982da": {
    "guid": "b86af630-941d-43a4-9f77-8968311982da",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Parque Nacional do Jaú/AM"
  },
  "8467bf36-e121-463f-b997-0a39002e6498": {
    "guid": "8467bf36-e121-463f-b997-0a39002e6498",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Rodovias Integradas do Paraná - lote 5"
  },
  "97d471b7-9648-49ab-ac1f-ea1710e084fe": {
    "guid": "97d471b7-9648-49ab-ac1f-ea1710e084fe",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "RDJ11 - Terminal de carga geral no Porto do Rio de Janeiro/RJ"
  },
  "390087b5-b5cc-48f9-b29e-be23cd49df47": {
    "guid": "390087b5-b5cc-48f9-b29e-be23cd49df47",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Unidades de Manejo na Flona de Pau-Rosa/AM"
  },
  "3cde796c-7233-4bb0-aab4-c4a1dc3b178a": {
    "guid": "3cde796c-7233-4bb0-aab4-c4a1dc3b178a",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1
  },
  "c22453be-53b3-42e8-993c-044445988e3b": {
    "guid": "c22453be-53b3-42e8-993c-044445988e3b",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Saneamento básico - Estado de Minas Gerais"
  },
  "7f935c06-6680-4853-8f8a-ca142c7a2e93": {
    "guid": "7f935c06-6680-4853-8f8a-ca142c7a2e93",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "SSB01 - Terminal de carga geral no Porto de São Sebastião/SP"
  },
  "dde7ec88-7ae3-48b0-81ae-4f84c82653ab": {
    "guid": "dde7ec88-7ae3-48b0-81ae-4f84c82653ab",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Tabuleiros de São Bernardo/MA"
  },
  "d9a3e730-68e0-4064-b6f0-437ccb2bd32a": {
    "guid": "d9a3e730-68e0-4064-b6f0-437ccb2bd32a",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "SFS201 - Terminal de carga geral no Porto de São Francisco do Sul/SC"
  },
  "c147867e-e4e5-4f88-82f7-2465578ba171": {
    "guid": "c147867e-e4e5-4f88-82f7-2465578ba171",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Tabuleiros Litorâneos/PI"
  },
  "71ba7c56-3e8e-47e8-bbf6-c5e8b7cc6b6b": {
    "guid": "71ba7c56-3e8e-47e8-bbf6-c5e8b7cc6b6b",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Unidades de Manejo na Flona de Balata-Tufari/AM"
  },
  "bb99829c-ee0f-4be9-850e-e6c8a8b9ac3c": {
    "guid": "bb99829c-ee0f-4be9-850e-e6c8a8b9ac3c",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Saneamento básico - Município de Porto Alegre/RS"
  },
  "130c9dbb-4dc6-4069-857f-cf310e08b519": {
    "guid": "130c9dbb-4dc6-4069-857f-cf310e08b519",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Socioeducativo - Estado de Minas Gerais"
  },
  "6bc82e39-143a-417c-90fa-23b31dbb7bdb": {
    "guid": "6bc82e39-143a-417c-90fa-23b31dbb7bdb",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "STS53 - Armazenagem de granéis minerais no Porto de Santos/SP"
  },
  "a06011b4-bc21-4fa7-a9e8-48674a98e57a": {
    "guid": "a06011b4-bc21-4fa7-a9e8-48674a98e57a",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "STS33 - Terminal de carga geral no Porto de Santos/SP"
  },
  "b84d54bb-9558-4e1a-8c8a-689ba18b82b8": {
    "guid": "b84d54bb-9558-4e1a-8c8a-689ba18b82b8",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "TRENSURB: Metrô da Região Metropolitana de Porto Alegre/RS"
  },
  "0a54a5c1-e5bc-442c-bec5-0d1b02e70852": {
    "guid": "0a54a5c1-e5bc-442c-bec5-0d1b02e70852",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "TGSFS-  Terminal de granel vegetal no Porto de São Francisco do Sul/SC"
  },
  "6aae4b5e-e0b6-42ac-ab48-d989bed57039": {
    "guid": "6aae4b5e-e0b6-42ac-ab48-d989bed57039",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Saneamento básico - São Gonçalo do Amarante/RN"
  },
  "5bab5aaf-029c-4f53-aeb9-dd613c18341e": {
    "guid": "5bab5aaf-029c-4f53-aeb9-dd613c18341e",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Terminal Pesqueiro de Natal/RN"
  },
  "1dc2fb2a-5acf-4492-9b58-0f22eed0256e": {
    "guid": "1dc2fb2a-5acf-4492-9b58-0f22eed0256e",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Socioeducativo - Estado de Santa Catarina"
  },
  "6b5a70d0-8239-4e4a-9a82-282c5b5b5b6f": {
    "guid": "6b5a70d0-8239-4e4a-9a82-282c5b5b5b6f",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Terminal Pesqueiro de Santos/SP"
  },
  "2b2ceaa5-4d64-4e4b-bd66-2e6eb7004be9": {
    "guid": "2b2ceaa5-4d64-4e4b-bd66-2e6eb7004be9",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Saneamento Básico - Estado de Pernambuco"
  },
  "6e20e506-c99a-4bee-9575-1ca7a0b35c5c": {
    "guid": "6e20e506-c99a-4bee-9575-1ca7a0b35c5c",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Saneamento básico - Estado de Rondônia"
  },
  "510de519-01fb-4129-ae7f-88e05fb446fe": {
    "guid": "510de519-01fb-4129-ae7f-88e05fb446fe",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Santa Cruz do Apodi/RN"
  },
  "76945b95-8813-44c8-9920-f3c0d115665f": {
    "guid": "76945b95-8813-44c8-9920-f3c0d115665f",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 1,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Trilha do Macuco - Parque Nacional do Iguaçu/PR"
  },
  "3c254b01-3cf2-4e08-b2c3-5b6efa81dfcd": {
    "guid": "3c254b01-3cf2-4e08-b2c3-5b6efa81dfcd",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "STS08 - Terminal de Granéis Líquidos e Gasosos no Porto de Santos"
  },
  "5a209758-6bbb-49ad-87dc-e26e718aeb98": {
    "guid": "5a209758-6bbb-49ad-87dc-e26e718aeb98",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 1,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Terminal Pesqueiro de Cananéia/SP"
  },
  "ec44ceb9-823b-427f-bf0e-62f951bd2f83": {
    "guid": "ec44ceb9-823b-427f-bf0e-62f951bd2f83",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Saneamento básico - Estado da Paraíba"
  },
  "65f14f47-1411-44b6-80fc-fbfd2e693561": {
    "guid": "65f14f47-1411-44b6-80fc-fbfd2e693561",
    "estudos_situacao": 1,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "TMP - teminal de passageiros no porto de Macei&#243;/AL"
  },
  "80d11795-e92e-4666-95f3-6b92c2a35cb9": {
    "guid": "80d11795-e92e-4666-95f3-6b92c2a35cb9",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Terminal Pesqueiro de Aracaju/SE"
  },
  "f857e215-6ed4-4a7c-937e-aca06cdffc43": {
    "guid": "f857e215-6ed4-4a7c-937e-aca06cdffc43",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Unidades de Manejo da Flona de Iquiri/AM"
  },
  "ffb78704-9433-40d1-9d61-af917924f5a1": {
    "guid": "ffb78704-9433-40d1-9d61-af917924f5a1",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Saneamento Básico - Estado de Goiás"
  },
  "b4515555-143a-46d4-b04b-737132ae83fa": {
    "guid": "b4515555-143a-46d4-b04b-737132ae83fa",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "SSD04 - Terminal de contêiner e carga geral no Porto de Salvador/BA"
  },
  "98f1c849-bd13-454b-b956-4940de5ae1c3": {
    "guid": "98f1c849-bd13-454b-b956-4940de5ae1c3",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Saneamento B&#225;sico - Estado do Par&#225; - Bloco C"
  },
  "d75ad856-f5cf-495f-9c77-69298bf32699": {
    "guid": "d75ad856-f5cf-495f-9c77-69298bf32699",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Unidades de Manejo na Flona do Bom Futuro/RO"
  },
  "229a579a-bfc2-41e0-aa23-e95744f505a3": {
    "guid": "229a579a-bfc2-41e0-aa23-e95744f505a3",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Saneamento Básico - Estado do Rio Grande do Norte"
  },
  "63f8f489-8110-45ad-b75d-54b941245c7e": {
    "guid": "63f8f489-8110-45ad-b75d-54b941245c7e",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Saneamento Básico - Estado do Maranhão"
  },
  "24a702fd-12e4-4b5e-924e-38f52b3fb788": {
    "guid": "24a702fd-12e4-4b5e-924e-38f52b3fb788",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Unidades de Manejo na Flona do Jatuarana/AM"
  },
  "29e5668e-73a3-4d34-b673-8f0787e5774b": {
    "guid": "29e5668e-73a3-4d34-b673-8f0787e5774b",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Unidades de Manejo na Flona do Trairão/PA"
  },
  "870432be-2fa4-4b58-bc96-df5357403831": {
    "guid": "870432be-2fa4-4b58-bc96-df5357403831",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Vale do Iuiú/BA"
  },
  "6537d77d-b6d2-4d8a-9987-b57fb53f2d2d": {
    "guid": "6537d77d-b6d2-4d8a-9987-b57fb53f2d2d",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "Unidades de Manejo na Gleba Castanho/AM"
  },
  "95e9734f-c26a-40eb-b298-6082143b96ca": {
    "guid": "95e9734f-c26a-40eb-b298-6082143b96ca",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "VDC10 - Terminal de granél líquido/sólido no Porto de Vila de Conde/PA"
  },
  "980f56b8-ee2a-4357-9039-d04f62fb0fb7": {
    "guid": "980f56b8-ee2a-4357-9039-d04f62fb0fb7",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "VDC10A - Terminal para granéis líquidos - Porto de Vila do Conde/PA"
  },
  "bd82ecda-dbb7-486d-8953-2d56651aa0ef": {
    "guid": "bd82ecda-dbb7-486d-8953-2d56651aa0ef",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "VDC04 - Terminal de granel sólido mineral no Porto de Vila do Conde/PA"
  },
  "8f4f887b-17b2-4624-8026-b795ea62d805": {
    "guid": "8f4f887b-17b2-4624-8026-b795ea62d805",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 1,
    "nome_projeto": "VDC29 -Terminal de granel sólido vegetal no Porto de Vila do Conde/PA"
  },
  "8320414a-6b8f-40c5-b3d6-c6240c948458": {
    "guid": "8320414a-6b8f-40c5-b3d6-c6240c948458",
    "estudos_situacao": 0,
    "contrato_situacao": 0,
    "licitacao_situacao": 0,
    "edital_situacao": 0,
    "tcu_situacao": 0,
    "consulta_situacao": 0,
    "nome_projeto": "Unidades de Manejo na Flona do Jamanxim/PA"
  }
};
    
// Detecta se está rodando em um ambiente estático (ex.: GitHub Pages)
const IS_STATIC_ENV = typeof window !== 'undefined' && /github\.io$/i.test(window.location.hostname);

// --- Integração com backend para respostas da SIF-Source ---
async function fetchProjectQuestions(projectId) {
    // Em modo estático (GitHub Pages), não há backend disponível
    if (IS_STATIC_ENV) {
        return {};
    }
    // Ambiente local: chama diretamente a API Node em localhost:3001
    const url = `http://localhost:3001/api/projects/${encodeURIComponent(projectId)}/questions`;
    console.log('[questions] GET', url);
    const res = await fetch(url, { cache: 'no-store' });
    if (!res.ok) throw new Error('Falha ao carregar perguntas do projeto');
    const json = await res.json();
    console.log('[questions] response for', projectId, json);
    return json;
}

function formatFieldValue(fieldValue) {
    if (!fieldValue) return null;
    if (typeof fieldValue === 'object' && 'Value' in fieldValue) {
        const v = fieldValue.Value;
        if (v == null) return null;
        if (typeof v === 'object' && 'Value' in v) return String(v.Value).trim();
        return String(v).trim();
    }
    return String(fieldValue).trim();
}

function getAnswerByCode(answers, code) {
    if (!Array.isArray(answers)) return null;
    const item = answers.find(a => a.cod_source === String(code));
    if (!item) return null;
    return {
        raw: item,
        text: formatFieldValue(item.answer)
    };
}

async function enrichProjectWithQuestions(project) {
    try {
        project.details = project.details || {};

        // Map the API responses to the project details
        const mapApiData = (data) => {
            if (!data) return null;
            
            // If it's already in the correct format, return as is
            if (data.status || data.dataInicio || data.dataFim || data.dataPublicacao) {
                return data;
            }

            // Handle case where data is an array of answers
            const answers = Array.isArray(data) ? data : (data.answers || []);
            
            // Find the answer with the most recent update
            const latestAnswer = answers.reduce((latest, current) => {
                if (!latest || new Date(current.updatedAt || 0) > new Date(latest.updatedAt || 0)) {
                    return current;
                }
                return latest;
            }, null);

            if (!latestAnswer) return null;

            // Map the answer to our standard format
            return {
                status: latestAnswer.answer || latestAnswer.status,
                dataInicio: latestAnswer.startDate || latestAnswer.dataInicio,
                dataFim: latestAnswer.endDate || latestAnswer.dataFim,
                dataPublicacao: latestAnswer.publicationDate || latestAnswer.dataPublicacao
            };
        };

        // API endpoints mapping
        const apiEndpoints = {
            'etapa': '2001216',  // data de inicio-estudos
            'etapa1': '2001217', // data de fim-estudos
            'etapa2': '2001218', // status-estudos
            'etapa3': '2001219', // data de inicio-consulta publica
            'etapa4': '2001220', // data de fim-consulta publica
            'etapa5': '2001221', // status-consulta publica
            'etapa6': '2001222', // data de inicio-controle externo
            'etapa7': '2001223', // data de fim-controle externo
            'etapa8': '2001224', // status-controle externo
            'etapa9': '2001225', // status da fase - aviso de licitação
            'etapa12': '2001227', // data de inicio - licitação
            'etapa13': '2001229', // status da fase - licitação
            'FaseStatus': '2001225' // data de publicação - aviso de licitação
        };

        // Fetch data for each endpoint
        for (const [key, questionId] of Object.entries(apiEndpoints)) {
            try {
                const response = await fetchProjectQuestions(project.id, questionId);
                project.details[key] = mapApiData(response);
                
                // Log para depuração
                console.log(`Processed ${key}:`, project.details[key]);
            } catch (error) {
                console.warn(`Error fetching data for ${key}:`, error);
                project.details[key] = null;
            }
        }

        // Preserve existing details if they exist
        const isMeaningful = (v) => {
            if (v == null) return false;
            const s = String(v).trim();
            if (!s) return false;
            return s !== 'Não informado' && s !== 'Pending';
        };

        if (isMeaningful(project.currentSituation)) {
            project.details.currentSituation = String(project.currentSituation).trim();
        }
        if (isMeaningful(project.nextSteps)) {
            project.details.deliberation = String(project.nextSteps).trim();
        }
        if (Array.isArray(project.risks) && project.risks.length) {
            project.details.risks = project.risks.slice();
        }
        if (project.rawData && Array.isArray(project.rawData.QuestionsTimeline)) {
            project.details.timeline = project.rawData.QuestionsTimeline;
        }

        // Log final para depuração
        console.log('Final project details:', project.details);
        return project;
    } catch (e) {
        console.warn('Não foi possível enriquecer o projeto com as perguntas:', e);
        return project;
    }
}
const DEFAULT_PROJECT_DATA = [
    {
        id: 'tunel-santos',
        sector: 'Portos',
        name: 'Túnel Santos-Guarujá',
        status: 'Leilão Realizado',
        statusColor: 'bg-green-500', 
        details: {
            description: "Parceria Público-Privada (PPP) entre o Governo Federal e o Estado de São Paulo para a construção e operação de um túnel submerso ligando as cidades de Santos e Guarujá.",
            currentSituation: "Leilão realizado em 05 de Setembro de 2025.",
            nextSteps: "Criação da conta para o aporte da União e consultas à SEST e ao Tesouro Nacional.",
            risks: [
                "Abertura da conta aporte pela Autoridade Portuária de Santos (APS).",
                "Questões sobre a titularidade do túnel e seus impactos no orçamento da União e nos resultados da APS."
            ],
            timeline: [
                { milestone: 'Leilão', date: '05/set/2025', status: 'completed' },
            ]
        }
    },
    {
        id: 'porto-parangua',
        sector: 'Portos',
        name: 'Porto de Paranaguá',
        status: 'Aguardando Edital',
        statusColor: 'bg-yellow-500',
        details: {
            description: "Concessão do Canal de Acesso Aquaviário por 25 anos para modernização e operação.",
            currentSituation: "Aguardando retorno do relator para publicação do edital. A Resolução CPPI já definiu as condições da desestatização.",
            nextSteps: "Publicação do edital e inclusão do projeto no Plano Nacional de Desestatização (PND).",
            risks: [
                "É necessária a publicação do Decreto de inclusão no PND antes da publicação do edital."
            ],
            timeline: [
                { milestone: 'Edital', date: 'set/2025', status: 'pending' },
                { milestone: 'Leilão', date: 'nov/25', status: 'pending' },
            ]
        }
    },
    {
        id: 'fiol-1',
        sector: 'Ferrovias',
        name: 'FIOL 1',
        status: 'Em Obras',
        statusColor: 'bg-blue-500',
        details: {
            description: "Construção da Ferrovia de Integração Oeste-Leste, Trecho 1, fundamental para o escoamento da produção de grãos e minérios.",
            currentSituation: "Obras em andamento com 75% de avanço total. Lotes 1F e 2F em execução, Lote 3F concluído, Lote 4F em execução. Início da operação previsto para 2027.",
            nextSteps: "Contratação de obras remanescentes para os lotes 2F e 4F no segundo semestre de 2025.",
            risks: [
                "Gestão dos contratos remanescentes e cumprimento dos prazos para conclusão em 2028."
            ],
            progress: 75
        }
    },
    {
        id: 'transnordestina',
        sector: 'Ferrovias',
        name: 'Transnordestina "L Invertido"',
        status: 'Em Obras',
        statusColor: 'bg-blue-500',
        details: {
            description: "Projeto de construção ferroviária para conectar o interior do Nordeste aos portos de Pecém (CE) e Suape (PE).",
            currentSituation: "Avanço físico total (Fase I + II) de 62%. Vários lotes em obra, com mobilização e contratações em andamento. Previsão de operação de carga no trecho Paes Landim/PI a Acopiara/CE para o segundo semestre de 2025.",
            nextSteps: "Contratação dos lotes 9 e 10 até setembro de 2025. Liberação de recursos do FDNE e BNDES.",
            risks: [
                "Coordenação da contratação e execução de múltiplos lotes simultaneamente.",
                "Dependência da liberação de financiamentos para avanço das obras."
            ],
            progress: 62
        }
    },
    {
        id: 'br-040-cristais',
        sector: 'Rodovias',
        name: 'BR-040/GO/MG (Rota dos Cristais)',
        status: 'Contrato Assinado',
        statusColor: 'bg-green-500',
        details: {
            description: "Concessão do trecho rodoviário entre Belo Horizonte/MG e Cristalina/GO.",
            currentSituation: "Leilão realizado em 26/09/2024. O vencedor foi a Vinci Highways com um desconto de 14,32%. Contrato assinado em 19/12/2024.",
            nextSteps: "Início das operações e plano de investimentos pela concessionária.",
            risks: [],
            timeline: [
                { milestone: 'Leilão', date: '26/09/2024', status: 'completed' },
                { milestone: 'Contrato', date: '19/12/2024', status: 'completed' },
            ]
        }
    },
    {
        id: 'br-381-mg',
        sector: 'Rodovias',
        name: 'BR-381/MG',
        status: 'Contrato Assinado',
        statusColor: 'bg-green-500',
        details: {
            description: "Concessão do trecho rodoviário entre Belo Horizonte/MG e Governador Valadares/MG.",
            currentSituation: "Leilão realizado em 29/08/2024. O vencedor foi a 4UM Investimentos com um desconto de 0,94%. Contrato assinado em 02/12/2024.",
            nextSteps: "Início dos trabalhos iniciais e investimentos previstos no contrato.",
            risks: [],
            timeline: [
                 { milestone: 'Leilão', date: '29/08/2024', status: 'completed' },
                 { milestone: 'Contrato', date: '02/12/2024', status: 'completed' },
            ]
        }
    },
    {
        id: 'leilao-transmissao-2025',
        sector: 'Energia',
        name: '1º Leilão de Transmissão de 2025',
        status: 'Em Análise no TCU',
        statusColor: 'bg-yellow-500',
        details: {
            description: "Contratação de instalações para transmissão de energia elétrica em 13 estados para expansão da rede básica.",
            currentSituation: "Minuta de Edital aprovada em 24/06/2025 e atualmente em avaliação pelo Tribunal de Contas da União (TCU).",
            nextSteps: "Aguardando manifestação do TCU (previsão para 24/09/2025) para prosseguir com a publicação do edital.",
            risks: [
                "Cumprimento do cronograma dependente da análise e aprovação do TCU."
            ],
            timeline: [
                { milestone: 'Análise TCU', date: '24/09/2025 (Prev.)', status: 'pending' },
                { milestone: 'Leilão', date: '31/10/2025 (Prev.)', status: 'pending' },
            ]
        }
    },
     {
        id: 'oleo-gas-opc5',
        sector: 'Óleo e Gás',
        name: '5º Ciclo da Oferta Permanente (Concessão)',
        status: 'Leilão Realizado',
        statusColor: 'bg-green-500',
        details: {
            description: "Oferta de blocos exploratórios de petróleo e gás sob o regime de concessão.",
            currentSituation: "Leilão realizado em 17/06/2025, com arrecadação recorde de R$ 989 milhões em bônus e previsão de R$ 1,45 bilhão em investimentos. Foram arrematados 34 blocos por 9 empresas.",
            nextSteps: "Adjudicação e homologação da licitação em 01/09/2025, com assinatura dos contratos prevista para 28/11/2025.",
            risks: [],
            timeline: [
                { milestone: 'Leilão', date: '17/06/2025', status: 'completed' },
                { milestone: 'Homologação', date: '01/09/2025', status: 'pending' },
                { milestone: 'Contratos', date: '28/11/2025', status: 'pending' },
            ]
        }
    },
    {
        id: 'hidrovia-paraguai',
        sector: 'Hidrovias',
        name: 'Hidrovia do Paraguai',
        status: 'Em Análise',
        statusColor: 'bg-yellow-500',
        details: {
            description: "Concessão da hidrovia para melhorias na navegação e escoamento de produção.",
            currentSituation: "Projeto no MPOR para envio ao TCU. Previsão de leilão para 2026.",
            nextSteps: "Análise pelo TCU e revisão pós-TCU para publicação do edital.",
            risks: [
                "Necessidade de qualificação no PPI com MMA/Ibama.",
                "Mudanças estruturais na modelagem não originadas da Audiência Pública.",
                "Restrição de participação da principal usuária.",
                "Falta de consenso sobre quem será o Poder Concedente."
            ],
            timeline: [
                 { milestone: 'Análise TCU', date: '2025', status: 'pending' },
                 { milestone: 'Leilão', date: '2026 (Prev.)', status: 'pending' },
            ]
        }
    }
];

// Função para carregar e processar o arquivo de descrições
async function loadProjectDescriptions() {
    try {
        const response = await fetch('descricoes');
        if (!response.ok) {
            console.warn('Não foi possível carregar o arquivo de descrições');
            return new Map();
        }
        
        const projects = await response.json();
        const projectsMap = new Map();
        
        projects.forEach(project => {
            if (project.rawData?.GPSCoordinates?.length > 0) {
                const coords = project.rawData.GPSCoordinates[0].location;
                if (coords && coords.x && coords.y) {
                    projectsMap.set(project.sourceId, {
                        lat: parseFloat(coords.y),
                        lng: parseFloat(coords.x),
                        mapUrl: `https://www.openstreetmap.org/export/embed.html?bbox=${parseFloat(coords.x)-0.1},${parseFloat(coords.y)-0.1},${parseFloat(coords.x)+0.1},${parseFloat(coords.y)+0.1}&layer=mapnik&marker=${parseFloat(coords.y)},${parseFloat(coords.x)}`
                    });
                    console.log(`Coordenadas para ${project.name || project.sourceId}:`, coords);
                }
            }
        });
        
        console.log('Dos projetos carregados:', projectsMap.size, 'possuem coordenadas');
        return projectsMap;
    } catch (error) {
        console.error('Erro ao carregar descrições dos projetos:', error);
        return new Map();
    }
}

document.addEventListener('DOMContentLoaded', async () => {
    const sidebarNav = document.getElementById('sidebar-nav');
    const projectsGrid = document.getElementById('projects-grid');
    const overviewSection = document.getElementById('overview-section');
    const sectionTitle = document.getElementById('section-title');
    const sectionSubtitle = document.getElementById('section-subtitle');
    const modal = document.getElementById('project-modal');
    const modalContent = document.getElementById('modal-content');
    const closeModalBtn = document.getElementById('close-modal');

    // Supabase config (preencha via window.SUPABASE_URL / window.SUPABASE_ANON antes de carregar esta página, ou edite aqui)
    const SUPABASE_URL = window.SUPABASE_URL || '';
    const SUPABASE_ANON = window.SUPABASE_ANON || '';
    let supabaseClient = null;
    if (typeof supabase !== 'undefined' && SUPABASE_URL && SUPABASE_ANON) {
        supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);
    }

    let projectData = DEFAULT_PROJECT_DATA;
    let sectors = [];
    let chartInstance = null;
    let activeSector = 'Todos';
    let meetingMode = false;
    // Cache em memória para evitar reprocessar/enriquecer o mesmo projeto várias vezes
    const enrichedProjectsCache = new Map();

    function saveOverrides() {
        try {
            localStorage.setItem('ppi_projects_overrides', JSON.stringify(projectData));
        } catch {}
    }

    function loadOverrides() {
        try {
            const raw = localStorage.getItem('ppi_projects_overrides');
            if (raw) {
                const arr = JSON.parse(raw);
                if (Array.isArray(arr) && arr.length) {
                    projectData = arr;
                }
            }
        } catch {}
    }

    async function supaLoadProjects() {
        const { data, error } = await supabaseClient
            .from('projects')
            .select('*')
            .order('sector', { ascending: true })
            .order('name', { ascending: true });
        if (error) throw error;
        return (data || []).map(r => ({
            id: r.id,
            sector: r.sector,
            name: r.name,
            status: r.status,
            statusColor: r.status_color,
            details: {
                ...(r.details || {}),
                progress: typeof r.progress === 'number' ? r.progress : (r.details?.progress ?? 0)
            }
        }));
    }

    async function supaUpsertProjects(items) {
        const rows = items.map(p => ({
            id: p.id,
            sector: p.sector,
            name: p.name,
            status: p.status,
            status_color: p.statusColor,
            progress: typeof p.details?.progress === 'number' ? p.details.progress : null,
            details: p.details || {}
        }));
        const { error } = await supabaseClient.from('projects').upsert(rows, { onConflict: 'id' });
        if (error) throw error;
    }

    async function supaDeleteProject(id) {
        const { error } = await supabaseClient.from('projects').delete().eq('id', id);
        if (error) throw error;
    }

async function fetchProjectsFromAPI() {
    try {
        // Tenta carregar do arquivo local primeiro
        try {
            // Primeiro tenta carregar o arquivo 'projetos'
            let response = await fetch('projetos', { cache: 'no-store' });
            let data;
            
            if (response.ok) {
                try {
                    data = await response.json();
                    console.log('Dados carregados do arquivo projetos:', data);
                    
                    // Função para mapear um projeto para o formato esperado
                    const mapProject = (project) => ({
                        id: project.id || project.sourceId || Math.random().toString(36).substr(2, 9),
                        name: project.name || 'Projeto sem nome',
                        sector: project.sector || 'Outros',
                        status: project.status || 'Em andamento',
                        statusColor: getStatusColor(project.status || 'Em andamento'),
                        details: {
                            description: project.description || 'Descrição não disponível',
                            currentSituation: project.currentSituation || 'Situação atual não informada',
                            nextSteps: project.nextSteps || 'Próximos passos não definidos',
                            risks: Array.isArray(project.risks) ? project.risks : 
                                  (project.risks ? [project.risks] : ['Riscos não mapeados']),
                            // Inclui os dados brutos para referência
                            ...(project.rawData || {})
                        },
                        // Mantém os dados originais para referência
                        rawData: project.rawData || {}
                    });
                    
                    // Se os dados são um array, mapeia para o formato esperado
                    if (Array.isArray(data)) {
                        return data.map(mapProject);
                    }
                    
                    // Se for um objeto com uma propriedade que é um array, mapeia essa propriedade
                    for (const key in data) {
                        if (Array.isArray(data[key])) {
                            console.log(`Mapeando array da propriedade '${key}'`);
                            return data[key].map(mapProject);
                        }
                    }
                } catch (e) {
                    console.warn('Erro ao processar o arquivo projetos, tentando próxima opção...', e);
                }
            }
            
            // Se não encontrou no formato esperado, tenta carregar projetos_descricao.json
            console.log('projetos não encontrado ou em formato inválido, tentando projetos_descricao.json...');
            response = await fetch('projetos_descricao.json', { cache: 'no-store' });
            
            // Se não encontrar, tenta carregar de projects.json
            if (!response.ok) {
                console.log('projetos_descricao.json não encontrado, tentando projects.json...');
                response = await fetch('projects.json', { cache: 'no-store' });
                if (!response.ok) {
                    throw new Error('Erro ao buscar arquivo local de projetos');
                }
            }
            
            data = await response.json();
            console.log('Dados carregados do arquivo local:', data);
            
            // Se os dados são um array, retorna diretamente
            if (Array.isArray(data)) {
                return data;
            }
            
            // Se for um objeto com uma propriedade que é um array, retorna essa propriedade
            for (const key in data) {
                if (Array.isArray(data[key])) {
                    console.log(`Retornando array da propriedade '${key}'`);
                    return data[key];
                }
            }
            
            // Se não encontrar um array válido, lança um erro
            throw new Error('Formato de dados inválido no arquivo local');
            
        } catch (localError) {
            console.warn('Não foi possível carregar arquivo local, tentando API...', localError);
            
            // Se falhar, tenta a API (opcional, você pode remover se quiser apenas o arquivo local)
            try {
                const response = await fetch('http://localhost:3001/api/projects');
                if (!response.ok) {
                    throw new Error('Erro ao buscar projetos da API');
                }
                const data = await response.json();
                console.log('Dados carregados da API:', data);
                return data;
            } catch (apiError) {
                console.error('Erro ao buscar da API:', apiError);
                // Retorna dados de exemplo em caso de falha total
                console.log('Usando dados de exemplo devido a falha no carregamento...');
                return [
                    {
                        id: 'tunel-santos',
                        sector: 'Portos',
                        name: 'Túnel Santos-Guarujá',
                        status: 'Leilão Realizado',
                        statusColor: getStatusColor('Leilão Realizado'),
                        details: {
                            description: 'Parceria Público-Privada (PPP) entre o Governo Federal e o Estado de São Paulo para a construção e operação de um túnel submerso ligando as cidades de Santos e Guarujá.',
                            currentSituation: 'Leilão realizado em 05 de Setembro de 2025.',
                            nextSteps: 'Assinatura do contrato e início das obras.',
                            risks: ['Atraso na liberação de licenças ambientais'],
                            progress: 0
                        }
                    },
                    {
                        id: 'porto-parangua',
                        sector: 'Portos',
                        name: 'Porto de Paranaguá',
                        status: 'Aguardando Edital',
                        statusColor: getStatusColor('Aguardando Edital'),
                        details: {
                            description: 'Concessão do Canal de Acesso Aquaviário por 25 anos para modernização e operação.',
                            currentSituation: 'Aguardando retorno do relator para publicação do edital. A Resolução CPPI já definiu as condições da desestatização.',
                            nextSteps: 'Publicação do edital e realização do leilão.',
                            risks: ['Mudanças nas condições de mercado podem afetar o interesse dos investidores'],
                            progress: 0
                        }
                    },
                    {
                        id: 'fiol-1',
                        sector: 'Ferrovias',
                        name: 'FIOL 1',
                        status: 'Em Obras',
                        statusColor: getStatusColor('Em Obras'),
                        details: {
                            description: 'Construção da Ferrovia de Integração Oeste-Leste, Trecho 1, fundamental para o escoamento da produção de grãos e minérios.',
                            currentSituation: 'Obras em andamento com 75% de avanço total. Lotes 1F e 2F em execução, Lote 3F concluído, Lote 4F em execução. Início da operação previsto para 2027.',
                            nextSteps: 'Conclusão dos lotes em andamento e início dos testes operacionais.',
                            risks: ['Atraso na liberação de recursos', 'Condições climáticas desfavoráveis'],
                            progress: 75
                        }
                    }
                ];
                console.log('MAPPED FRONTEND DATA (fallback):', fallback);
                return fallback;
            }
        }
    } catch (error) {
        console.error('Erro ao buscar projetos:', error);
        return [];
    }
}

function getStatusColor(status) {
    if (!status) return 'gray';
    
    const statusLower = status.toLowerCase();
    if (statusLower.includes('concluído') || statusLower.includes('concluido') || statusLower.includes('assinado')) return 'green';
    if (statusLower.includes('andamento') || statusLower.includes('em andamento') || statusLower.includes('licitação')) return 'blue';
    if (statusLower.includes('atrasado') || statusLower.includes('parado') || statusLower.includes('suspenso')) return 'red';
    if (statusLower.includes('planejamento') || statusLower.includes('estudo')) return 'yellow';
    return 'gray';
}

    async function loadData() {
        try {
            // Tenta carregar da API primeiro
            projectData = await fetchProjectsFromAPI();
            
            // Carrega as descrições dos projetos com as coordenadas
            const projectsMap = await loadProjectDescriptions();
            
            console.log('Projetos com coordenadas encontrados:', projectsMap.size);
            
            // Atualiza os projetos com as coordenadas
            projectData = projectData.map(project => {
                // Tenta encontrar pelo sourceId (que é o id usado no arquivo descricoes)
                const projectKey = project.rawData?.Guid || project.id;
                
                if (projectsMap.has(projectKey)) {
                    const coords = projectsMap.get(projectKey);
                    console.log(`Adicionando coordenadas ao projeto ${project.name}:`, coords);
                    return {
                        ...project,
                        coordinates: {
                            lat: coords.lat,
                            lng: coords.lng
                        },
                        mapUrl: coords.mapUrl
                    };
                } else {
                    console.log(`Nenhuma coordenada encontrada para o projeto ${project.name} (${projectKey})`);
                }
                return project;
            });
            
            // Expõe para debug no console do navegador
            try { window.projectData = projectData; } catch {}
            
            // Se não retornou projetos da API, tenta carregar do Supabase ou do arquivo JSON
            if (projectData.length === 0) {
                if (supabaseClient) {
                    projectData = await supaLoadProjects();
                } else {
                    try {
                        const response = await fetch('data/projects.json', { cache: 'no-store' });
                        if (response.ok) {
                            const json = await response.json();
                            if (Array.isArray(json) && json.length > 0) {
                                projectData = json;
                            }
                        }
                    } catch (e) {
                        console.error('Erro ao carregar projetos do arquivo:', e);
                    }
                }
                // Apply local overrides if any (apenas no modo arquivo)
                loadOverrides();
            }
        } catch (e) {
            console.error('Erro ao carregar dados:', e);
            // Fallback para os dados padrão
            projectData = [...DEFAULT_PROJECT_DATA];
        }
        
        // Remove apenas projetos de teste
        projectData = projectData.filter(project => 
            !project.name || !project.name.toLowerCase().includes('teste')
        );
        
        console.log('Total de projetos carregados:', projectData.length);
        
        sectors = ['Todos', ...new Set(projectData.map(p => p.sector))];
    }

    function renderSidebar() {
        // Mapeamento de setores para português
        const sectorTranslations = {
            // English to Portuguese translations
            'Ports': 'Portos',
            'Highways': 'Rodovias',
            'Railways': 'Ferrovias',
            'Airports': 'Aeroportos',
            'Energy': 'Energia',
            'Oil & Gas': 'Petróleo e Gás',
            'Waterways': 'Hidrovias',
            'Sanitation': 'Saneamento',
            'Social Infrastructure': 'Infraestrutura Social',
            'Other': 'Outros',
            'Water & Waste': 'Água e Resíduos',
            'Urban Services': 'Serviços Urbanos',
            'Health': 'Saúde',
            'Transport': 'Transporte',
            // Keep existing Portuguese mappings
            'Todos': 'Todos',
            'Portos': 'Portos',
            'Rodovias': 'Rodovias',
            'Ferrovias': 'Ferrovias',
            'Energia': 'Energia',
            'Óleo e Gás': 'Petróleo e Gás',
            'Hidrovias': 'Hidrovias',
            'Saúde': 'Saúde',
            'Transporte': 'Transporte'
        };

        // Filtra setores e remove 'Saúde', 'Sade', 'Health' e variações
        const filteredSectors = sectors.filter(sector => {
            if (!sector) return false;
            const lowerSector = sector.toLowerCase().trim();
            return ![
                'saúde', 'saude', 'sáude', 'saúde', 'saúde '
            ].includes(lowerSector) && 
            !lowerSector.includes('saúde') && 
            !lowerSector.includes('saude') &&
            !lowerSector.includes('health');
        });

        const sectorLinks = filteredSectors.map(sector => {
            // Usa a tradução se disponível, senão mantém o original
            const displayName = sectorTranslations[sector] || sector;
            return `
                <a href="#" data-sector="${sector}" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors ${(!meetingMode && sector === activeSector) ? 'bg-blue-100 text-blue-700 font-bold' : ''}">
                    <span class="ml-3">${displayName}</span>
                </a>
            `;
        }).join('');

        const meetingBtn = `
            <div class="mt-4 pt-4 border-t border-gray-200">
                <a href="#" data-action="meeting" class="flex items-center px-4 py-3 rounded-lg transition-colors ${meetingMode ? 'bg-blue-100 text-blue-700 font-bold' : 'text-gray-700 hover:bg-gray-100'}">
                    <i class="fas fa-people-arrows mr-2"></i>
                    <span>Reunião</span>
                </a>
            </div>`;
        
        sidebarNav.innerHTML = sectorLinks + meetingBtn;
    }

    function renderKPIs() {
        const totalProjects = projectData.length;
        const projectsByStatus = projectData.reduce((acc, p) => {
            const status = p.status.toLowerCase();
            if (status.includes('assinado') || status.includes('realizado')) {
                acc.concluidos = (acc.concluidos || 0) + 1;
            } else if (status.includes('obras') || status.includes('análise')) {
                acc.andamento = (acc.andamento || 0) + 1;
            } else {
                 acc.planejamento = (acc.planejamento || 0) + 1;
            }
            return acc;
        }, { concluidos: 0, andamento: 0, planejamento: 0 });

        return `
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center">
                    <div class="bg-blue-100 p-4 rounded-full mr-4"><i class="fas fa-tasks text-blue-500 fa-2x"></i></div>
                    <div>
                        <p class="text-3xl font-bold">${totalProjects}</p>
                        <p class="text-gray-500">Projetos Totais</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center">
                    <div class="bg-green-100 p-4 rounded-full mr-4"><i class="fas fa-check-circle text-green-500 fa-2x"></i></div>
                    <div>
                        <p class="text-3xl font-bold">${projectsByStatus.concluidos}</p>
                        <p class="text-gray-500">Leilões/Contratos Feitos</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md flex items-center">
                    <div class="bg-yellow-100 p-4 rounded-full mr-4"><i class="fas fa-cogs text-yellow-500 fa-2x"></i></div>
                    <div>
                        <p class="text-3xl font-bold">${projectsByStatus.andamento}</p>
                        <p class="text-gray-500">Em Andamento/Análise</p>
                    </div>
                </div>
            </div>
        `;
    }

    function renderOverviewChart() {
        const sectorCounts = projectData.reduce((acc, p) => {
            acc[p.sector] = (acc[p.sector] || 0) + 1;
            return acc;
        }, {});

        overviewSection.innerHTML = `
            ${renderKPIs()}
            <div class="bg-white p-6 rounded-xl shadow-md">
                 <h3 class="text-xl font-bold mb-4">Projetos por Setor</h3>
                 <div class="chart-container">
                    <canvas id="overviewChart"></canvas>
                </div>
            </div>`;
        
        const ctx = document.getElementById('overviewChart').getContext('2d');
        if(chartInstance) {
            chartInstance.destroy();
        }
        chartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(sectorCounts),
                datasets: [{
                    label: 'Nº de Projetos',
                    data: Object.values(sectorCounts),
                    backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-light').trim() || '#3E5FA4',
                    borderColor: getComputedStyle(document.documentElement).getPropertyValue('--primary').trim() || '#2E4E8C',
                    borderWidth: 1,
                    borderRadius: 5,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#e5e7eb'
                        }
                    },
                     x: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                },
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const chartElement = elements[0];
                        const sector = chartInstance.data.labels[chartElement.index];
                        updateView(sector);
                    }
                }
            }
        });
    }

    // Função para verificar o status do contrato
    function getContractStatus(project) {
        // Verifica se o projeto tem informações de contrato
        if (project.details?.contrato) {
            const status = project.details.contrato.toLowerCase();
            if (status === '3' || status.includes('completed') || status.includes('assinatura')) {
                return 'completed';
            } else if (status === '2' || status.includes('progress')) {
                return 'in-progress';
            }
        }
        return 'not-started';
    }

    async function getStageIndicators(project) {
    // Define as etapas e suas chaves correspondentes
    const stages = [
        { key: 'estudos', label: 'Estudos' },
        { key: 'consulta', label: 'CP' },
        { key: 'edital', label: 'Edital' },
        { key: 'licitacao', label: 'Licitação' },
        { key: 'contrato', label: 'Contrato' }
    ];

    // Log para depuração
    console.log('Dados do projeto:', {
        name: project.name,
        hasEtapas: !!project.etapas,
        etapas: project.etapas
    });

    // Gera o HTML para cada estágio
    return stages.map(stage => {
        let statusClass = 'bg-gray-300'; // Padrão: não iniciado
        let statusText = 'Não iniciado';
        
        // Verifica se existem etapas no projeto
        if (project.etapas?.[stage.key]) {
            const etapa = project.etapas[stage.key];
            const status = (etapa.status || '').toLowerCase();
            const situacao = (etapa.situacao || '').toLowerCase();
            
            console.log(`Verificando estágio ${stage.key} para ${project.name}:`, { status, situacao });
            
            if (situacao === 'completo' || status.includes('complet') || status.includes('concluíd') || status.includes('aprovad')) {
                statusClass = 'bg-green-500';
                statusText = 'Concluído';
            } else if (situacao || status) {
                statusClass = 'bg-yellow-500';
                statusText = 'Em andamento';
            }
        } else if (stage.key === 'contrato') {
            // Status especial para o contrato
            const contractStatus = getContractStatus(project);
            if (contractStatus === 'completed') {
                statusClass = 'bg-green-500';
                statusText = 'Concluído';
            } else if (contractStatus === 'in-progress') {
                statusClass = 'bg-yellow-500';
                statusText = 'Em andamento';
            }
        }

        return `
            <div class="flex items-center gap-1" title="${stage.label}: ${statusText}">
                <div class="w-2 h-2 rounded-full ${statusClass}"></div>
                <span class="text-xs text-gray-600">${stage.label}</span>
            </div>
        `;
    }).join('');
}

    async function renderProjects(sector = 'Todos') {
        const filteredProjects = sector === 'Todos' ? projectData : projectData.filter(p => p.sector === sector);
        
        // Mapeia cada projeto para uma promessa que resolve para o HTML do card
        const projectPromises = filteredProjects.map(async (project) => {
            try {
                // Debug: Verificar a estrutura de etapas do projeto
                console.log('Processando projeto:', project.name, 'GUID:', project.guid);
                
                // Gera os indicadores de estágio de forma assíncrona
                const etapasHtml = await getStageIndicators(project);
                
                return `
                    <div data-id="${project.id}" class="project-card bg-white rounded-xl shadow-md p-6 border border-gray-200 cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col justify-between">
                        <div>
                            <p class="text-sm text-gray-500">${project.sector}</p>
                            <h3 class="text-lg font-bold mt-1 text-gray-800">${project.name}</h3>
                        </div>
                        <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-200">
                            <div class="flex items-center">
                                <span class="status-dot ${project.statusColor} mr-2"></span>
                                <span class="text-sm font-medium text-gray-600">${project.status}</span>
                            </div>
                            <div class="flex items-center gap-2" id="indicators-${project.id}">
                                ${etapasHtml}
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Erro ao renderizar projeto', project.name, error);
                return ''; // Retorna string vazia em caso de erro
            }
        });
        
        // Aguarda todas as promessas serem resolvidas e atualiza o HTML
        const projectsHtml = await Promise.all(projectPromises);
        projectsGrid.innerHTML = projectsHtml.join('');
    }

    // Modo de Gerenciamento de Projetos (Visão em Lista)
    function renderMeetingView() {
        overviewSection.classList.add('hidden');
        sectionTitle.textContent = 'Gerenciamento de Projetos';
        sectionSubtitle.textContent = 'Visualize e edite os projetos de forma organizada';

        const sectorOptions = sectors.filter(s => s !== 'Todos')
            .map(s => `<option value="${s}" ${s===activeSector?'selected':''}>${s}</option>`).join('');
        const filtered = activeSector === 'Todos' ? projectData : projectData.filter(p => p.sector === activeSector);

        // Linhas da tabela
        const tableRows = filtered.map(p => {
            const progress = typeof p.details?.progress === 'number' ? p.details.progress : 0;
            return `
                <tr class="hover:bg-gray-50 h-16" data-project-id="${p.id}">
                    <td class="px-6 py-4 align-middle">
                        <div class="text-sm font-medium text-gray-900">${p.name || 'Sem nome'}</div>
                        <div class="text-xs text-gray-500 line-clamp-2">
                            ${p.details?.description || 'Sem descrição'}
                        </div>
                    </td>
                    <td class="px-6 py-4 align-middle">
                        <div class="text-sm text-gray-900">${p.sector || 'Não informado'}</div>
                    </td>
                    <td class="px-6 py-4 align-middle">
                        <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.statusColor || 'bg-gray-400'} text-white">
                            ${p.status || 'Sem status'}
                        </span>
                    </td>
                    <td class="px-6 py-4 align-middle">
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
                            <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${progress}%"></div>
                        </div>
                        <span class="text-xs text-gray-500">${progress}% concluído</span>
                    </td>
                    <td class="px-6 py-4 align-middle text-right">
                        <div class="flex justify-end space-x-2">
                            <button class="edit-btn p-1 text-blue-600 hover:text-blue-800" data-id="${p.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-btn p-1 text-red-600 hover:text-red-800" data-id="${p.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </td>
                </tr>`;
        }).join('');

        // Renderiza a tabela ou mensagem de nenhum resultado
        projectsGrid.innerHTML = `
            <div class="flex flex-col h-full w-full bg-white">
                <div class="py-4 px-6 border-b">
                    <h2 class="text-2xl font-semibold text-gray-800">Projetos</h2>
                    <p class="text-sm text-gray-500">Lista de projetos cadastrados</p>
                </div>
                
                <!-- Filtros e ações -->
                <div class="px-6 py-4 border-b">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0">
                        <div class="w-full sm:w-1/2">
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input type="text" id="meeting-search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Buscar projetos...">
                            </div>
                        </div>
                        <div class="w-full sm:w-1/2 flex justify-end space-x-2">
                            <div class="w-48">
                                <select id="sector-filter" class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                    <option value="Todos">Todos os Setores</option>
                                    ${sectorOptions}
                                </select>
                            </div>
                            <button id="meeting-add" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                <i class="fas fa-plus mr-2"></i> Novo
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tabela de Projetos -->
                ${filtered.length > 0 ? `
                    <div class="flex-1 overflow-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50 sticky top-0 z-10">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 30%;">Projeto</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 20%;">Setor</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 15%;">Status</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 20%;">Progresso</th>
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 15%;">Ações</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                ${tableRows}
                            </tbody>
                        </table>
                    </div>
                ` : `
                    <div class="flex-1 flex items-center justify-center bg-white p-8 text-center">
                        <div class="w-full max-w-md">
                            <i class="fas fa-inbox text-4xl text-gray-400 mb-4"></i>
                            <h3 class="text-lg font-medium text-gray-900">Nenhum projeto encontrado</h3>
                            <p class="mt-1 text-sm text-gray-500">Comece adicionando um novo projeto ou altere os filtros de busca.</p>
                            <div class="mt-6">
                                <button id="meeting-add" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                    <i class="fas fa-plus mr-2"></i> Adicionar Projeto
                                </button>
                            </div>
                        </div>
                    </div>
                `}
                
                <!-- Barra de rodapé com contagem -->
                <div class="bg-white border-t border-gray-200 px-6 py-3">
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-600">
                            <span class="font-medium">${filtered.length}</span> ${filtered.length === 1 ? 'projeto encontrado' : 'projetos encontrados'}
                        </div>
                        <div class="flex items-center space-x-4">
                            <span class="text-sm text-gray-500">Total de projetos: ${projectData.length}</span>
                        </div>
                    </div>
                </div>
            </div>
        `;

        // Atualiza a contagem de projetos concluídos na barra de rodapé
        const completedCount = projectData.filter(p => typeof p.details?.progress === 'number' && p.details.progress === 100).length;
        const completedElement = document.getElementById('completed-count');
        if (completedElement) {
            completedElement.textContent = completedCount;
        }

        // Manipulador do campo de busca
        const searchInput = document.getElementById('search-project');
        if (searchInput) {
            let searchTimeout;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const searchTerm = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('tbody tr[data-project-id]');
                    rows.forEach(row => {
                        const projectName = row.querySelector('td:first-child .text-sm').textContent.toLowerCase();
                        const projectSector = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
                        const isVisible = projectName.includes(searchTerm) || projectSector.includes(searchTerm);
                        row.style.display = isVisible ? '' : 'none';
                    });
                }, 300);
            });
        }

        // Manipulador do seletor de setor
        document.getElementById('meeting-sector')?.addEventListener('change', (e) => {
            activeSector = e.target.value;
            renderSidebar();
            renderMeetingView();
        });

        // Botão Sair
        document.getElementById('meeting-exit')?.addEventListener('click', () => {
            meetingMode = false;
            updateView(activeSector);
        });

        // Botão Adicionar Projeto
        document.querySelectorAll('#meeting-add').forEach(btn => {
            btn.addEventListener('click', () => {
                const newProject = {
                    id: 'proj-' + Date.now(),
                    sector: activeSector === 'Todos' ? sectors[1] : activeSector,
                    name: 'Novo Projeto',
                    status: 'Em Análise',
                    statusColor: 'bg-yellow-500',
                    details: { progress: 0 }
                };
                projectData.unshift(newProject);
                renderMeetingView();
                // Rolar para o topo para ver o novo projeto
                window.scrollTo(0, 0);
            });
        });

        // Botões Editar Projeto
        document.querySelectorAll('.edit-project').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const projectId = e.currentTarget.getAttribute('data-id');
                const project = projectData.find(p => p.id === projectId);
                if (!project) return;

                // Cria o modal de edição
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Editar Projeto: ${project.name}</h3>
                        </div>
                        <div class="p-6 space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Projeto</label>
                                    <input type="text" id="edit-name" value="${project.name}" class="w-full border border-gray-300 rounded-md p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Setor</label>
                                    <select id="edit-sector" class="w-full border border-gray-300 rounded-md p-2">
                                        ${sectors.filter(s => s !== 'Todos').map(s => 
                                            `<option value="${s}" ${s === project.sector ? 'selected' : ''}>${s}</option>`
                                        ).join('')}
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <select id="edit-status" class="w-full border border-gray-300 rounded-md p-2">
                                        <option value="Em Análise" ${project.status === 'Em Análise' ? 'selected' : ''}>Em Análise</option>
                                        <option value="Em Andamento" ${project.status === 'Em Andamento' ? 'selected' : ''}>Em Andamento</option>
                                        <option value="Concluído" ${project.status === 'Concluído' ? 'selected' : ''}>Concluído</option>
                                        <option value="Atrasado" ${project.status === 'Atrasado' ? 'selected' : ''}>Atrasado</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Progresso (%)</label>
                                    <input type="number" id="edit-progress" min="0" max="100" 
                                        value="${typeof project.details?.progress === 'number' ? project.details.progress : 0}" 
                                        class="w-full border border-gray-300 rounded-md p-2">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Descrição</label>
                                    <textarea id="edit-description" class="w-full border border-gray-300 rounded-md p-2 h-32">${project.details?.description || ''}</textarea>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Situação Atual</label>
                                    <textarea id="edit-currentSituation" class="w-full border border-gray-300 rounded-md p-2 h-32">${project.details?.currentSituation || ''}</textarea>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Próximos Passos</label>
                                    <textarea id="edit-nextSteps" class="w-full border border-gray-300 rounded-md p-2 h-32">${project.details?.nextSteps || ''}</textarea>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Pontos de Atenção (um por linha)</label>
                                    <textarea id="edit-risks" class="w-full border border-gray-300 rounded-md p-2 h-32">${Array.isArray(project.details?.risks) ? project.details.risks.join('\n') : ''}</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3">
                            <button type="button" id="cancel-edit" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                                Cancelar
                            </button>
                            <button type="button" id="save-edit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
                                Salvar Alterações
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Fechar modal ao clicar fora
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });
                
                // Botão Cancelar
                modal.querySelector('#cancel-edit').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });
                
                // Botão Salvar
                modal.querySelector('#save-edit').addEventListener('click', () => {
                    // Atualiza os dados do projeto
                    project.name = modal.querySelector('#edit-name').value;
                    project.sector = modal.querySelector('#edit-sector').value;
                    project.status = modal.querySelector('#edit-status').value;
                    project.statusColor = {
                        'Em Análise': 'bg-yellow-500',
                        'Em Andamento': 'bg-blue-500',
                        'Concluído': 'bg-green-500',
                        'Atrasado': 'bg-red-500'
                    }[project.status] || 'bg-gray-500';
                    
                    project.details = project.details || {};
                    project.details.progress = parseInt(modal.querySelector('#edit-progress').value) || 0;
                    project.details.description = modal.querySelector('#edit-description').value;
                    project.details.currentSituation = modal.querySelector('#edit-currentSituation').value;
                    project.details.nextSteps = modal.querySelector('#edit-nextSteps').value;
                    project.details.risks = modal.querySelector('#edit-risks').value.split('\n').filter(Boolean);
                    
                    // Remove o modal e atualiza a visualização
                    document.body.removeChild(modal);
                    renderMeetingView();
                });
            });
        });

        // Botão Salvar Alterações
        document.getElementById('meeting-save')?.addEventListener('click', async () => {
            try {
                if (supabaseClient) {
                    await supaUpsertProjects(projectData);
                    alert('Alterações salvas com sucesso no Supabase!');
                } else {
                    localStorage.setItem('ppi_projects_overrides', JSON.stringify(projectData));
                    alert('Alterações salvas localmente. Use Exportar JSON para baixar o arquivo.');
                }
            } catch (e) {
                alert('Erro ao salvar: ' + (e.message || e));
            }
        });

        // Botão Exportar JSON
        document.getElementById('meeting-export')?.addEventListener('click', () => {
            const dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(projectData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute('href', dataStr);
            downloadAnchorNode.setAttribute('download', `projetos-${new Date().toISOString().split('T')[0]}.json`);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        });

        // Botão Excluir Projeto
        document.querySelectorAll('.meeting-delete').forEach(btn => {
            btn.addEventListener('click', async (e) => {
                e.stopPropagation();
                const id = e.currentTarget.getAttribute('data-id');
                const project = projectData.find(p => p.id === id);
                if (!project) return;

                if (!confirm(`Tem certeza que deseja excluir o projeto "${project.name}"? Esta ação não pode ser desfeita.`)) {
                    return;
                }

                try {
                    if (supabaseClient) {
                        await supaDeleteProject(id);
                    }
                    
                    // Remove o projeto da lista local
                    const index = projectData.findIndex(p => p.id === id);
                    if (index > -1) {
                        projectData.splice(index, 1);
                    }
                    
                    // Atualiza o localStorage se estiver usando armazenamento local
                    if (!supabaseClient) {
                        localStorage.setItem('ppi_projects_overrides', JSON.stringify(projectData));
                    }
                    
                    // Atualiza a visualização
                    renderSidebar();
                    renderMeetingView();
                    
                    alert('Projeto excluído com sucesso!');
                } catch (e) {
                    alert('Erro ao excluir o projeto: ' + (e.message || e));
                }
            });
        });
        document.getElementById('meeting-add')?.addEventListener('click', () => {
            // Determine target sector for the new project
            let targetSector = activeSector;
            if (targetSector === 'Todos') {
                targetSector = sectors.find(s => s !== 'Todos') || 'Diversos';
            }
            const newId = 'proj_' + Date.now();
            const newProject = {
                id: newId,
                sector: targetSector,
                name: 'Novo Projeto',
                status: 'Em Análise',
                statusColor: 'bg-yellow-500',
                details: {
                    description: '',
                    currentSituation: '',
                    nextSteps: '',
                    deliberation: '',
                    risks: [],
                    progress: 0,
                    mapEmbed: '',
                    mapImageUrl: ''
                }
            };
            projectData.push(newProject);
            // Ensure sectors includes the target sector (except 'Todos')
            if (!sectors.includes(targetSector)) {
                sectors.push(targetSector);
            }
            try { localStorage.setItem('ppi_projects_overrides', JSON.stringify(projectData)); } catch {}
            // If we were in 'Todos', switch the view to the target sector so it appears
            activeSector = targetSector;
            renderSidebar();
            renderMeetingView();
            // Open and focus the newly created item
            const parent = projectsGrid.querySelector(`details.meeting-item[data-id="${newId}"]`);
            if (parent) {
                parent.open = true;
                parent.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });
        document.getElementById('meeting-save')?.addEventListener('click', async () => {
            const fields = projectsGrid.querySelectorAll('[data-field]');
            const byId = new Map(projectData.map(p=>[p.id,p]));
            fields.forEach(el => {
                const id = el.getAttribute('data-id');
                const field = el.getAttribute('data-field');
                const proj = byId.get(id);
                if (!proj) return;
                proj.details = proj.details || {};
                if (field === 'risks') {
                    const lines = (el.value||'').split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
                    proj.details.risks = lines;
                } else if (field === 'progress') {
                    const n = Number(el.value);
                    proj.details.progress = isNaN(n) ? undefined : Math.max(0, Math.min(100, n));
                } else {
                    proj.details[field] = el.value;
                }
            });
            try {
                if (supabaseClient) {
                    await supaUpsertProjects(projectData);
                    alert('Alterações salvas no Supabase!');
                } else {
                    localStorage.setItem('ppi_projects_overrides', JSON.stringify(projectData));
                    alert('Alterações salvas localmente. Use Exportar JSON para baixar o arquivo.');
                }
            } catch (e) {
                alert('Falha ao salvar: ' + (e.message || e));
            }
        });
        document.getElementById('meeting-export')?.addEventListener('click', () => {
            const blob = new Blob([JSON.stringify(projectData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'projects.json';
            a.click();
            URL.revokeObjectURL(url);
        });
        // Delete per project
        projectsGrid.querySelectorAll('.meeting-delete').forEach(btn => {
            btn.addEventListener('click', async () => {
                const id = btn.getAttribute('data-id');
                const proj = projectData.find(p => p.id === id);
                if (!proj) return;
                if (!confirm(`Excluir o projeto "${proj.name}"? Esta ação não pode ser desfeita (no localStorage).`)) return;
                const sector = proj.sector;
                const idx = projectData.findIndex(p => p.id === id);
                if (idx >= 0) projectData.splice(idx, 1);
                try {
                    if (supabaseClient) {
                        await supaDeleteProject(id);
                    } else {
                        localStorage.setItem('ppi_projects_overrides', JSON.stringify(projectData));
                    }
                } catch (e) {
                    alert('Falha ao excluir: ' + (e.message || e));
                }
                // Update sectors list if empty
                if (!projectData.some(p => p.sector === sector)) {
                    sectors = sectors.filter(s => s === 'Todos' || s !== sector);
                    if (activeSector === sector) activeSector = 'Todos';
                }
                renderSidebar();
                renderMeetingView();
            });
        });
    }

    // Function to get stage data from consolidado_etapas.json
    // Extract timeline data from a project's sourceId (which is the GUID)
    function getPhaseStatesFromTimelineData(projectSourceId, projectName = null) {
        try {
            console.log(`[getPhaseStatesFromTimelineData] Fetching data for project GUID: ${projectSourceId}, Name: ${projectName}`);
            console.log(`[getPhaseStatesFromTimelineData] allTimelineProjects available:`, !!window.allTimelineProjects);
            console.log(`[getPhaseStatesFromTimelineData] Total projects in allTimelineProjects:`, window.allTimelineProjects ? Object.keys(window.allTimelineProjects).length : 0);
            
            // Check if allTimelineProjects exists
            if (!window.allTimelineProjects) {
                console.error(`[getPhaseStatesFromTimelineData] allTimelineProjects object not found!`);
                return null;
            }
            
            let projectData = null;
            
            // Try direct GUID lookup first
            if (projectSourceId && window.allTimelineProjects[projectSourceId]) {
                projectData = window.allTimelineProjects[projectSourceId];
                console.log(`[getPhaseStatesFromTimelineData] Found project by GUID: ${projectSourceId}`);
            } else if (projectName) {
                // Fallback: search by project name
                console.log(`[getPhaseStatesFromTimelineData] GUID not found, searching by name: ${projectName}`);
                for (const guid in window.allTimelineProjects) {
                    const proj = window.allTimelineProjects[guid];
                    if (proj.nome_projeto && proj.nome_projeto.includes(projectName)) {
                        projectData = proj;
                        console.log(`[getPhaseStatesFromTimelineData] Found project by name match: ${guid}`);
                        break;
                    }
                }
            }
            
            if (!projectData) {
                console.warn(`[getPhaseStatesFromTimelineData] No timeline data found for GUID: ${projectSourceId} or name: ${projectName}`);
                console.warn(`[getPhaseStatesFromTimelineData] Sample available GUIDs:`, Object.keys(window.allTimelineProjects).slice(0, 3));
                return null;
            }
            
            console.log(`[getPhaseStatesFromTimelineData] Loaded timeline data for project:`, projectData);
            
            // Map timeline data to phase states
            // Phases in order: Estudos, Consulta Pública, TCU, Edital, Licitação, Contrato
            const phaseMap = [
                { key: 'estudos_situacao', name: 'Estudos' },
                { key: 'consulta_situacao', name: 'Consulta Pública' },
                { key: 'tcu_situacao', name: 'TCU' },
                { key: 'edital_situacao', name: 'Edital' },
                { key: 'licitacao_situacao', name: 'Licitação' },
                { key: 'contrato_situacao', name: 'Contrato' }
            ];
            
            // Find the last completed phase (status = 1)
            let lastCompletedIndex = -1;
            const phaseStates = phaseMap.map((phase, index) => {
                const isCompleted = projectData[phase.key] == 1; // Use == to match both 1 and "1"
                if (isCompleted) {
                    lastCompletedIndex = index;
                }
                
                return {
                    key: phase.name.toLowerCase().replace(/\s+/g, '-'),
                    name: phase.name,
                    completed: isCompleted,
                    isCurrent: false,
                    status: isCompleted ? 'Concluído' : 'Pendente'
                };
            });
            
            // Enforce cascade rule: if a phase is completed, all previous phases must be completed
            if (lastCompletedIndex > -1) {
                for (let i = 0; i < lastCompletedIndex; i++) {
                    phaseStates[i].completed = true;
                    phaseStates[i].status = 'Concluído';
                }
            }
            
            // Mark the first non-completed phase as current
            if (lastCompletedIndex < phaseStates.length - 1) {
                phaseStates[lastCompletedIndex + 1].isCurrent = true;
            }
            
            console.log(`[getPhaseStatesFromTimelineData] Phase states:`, phaseStates);
            return phaseStates;
            
        } catch (error) {
            console.error('[getPhaseStatesFromTimelineData] Error:', error);
            return null;
        }
    }

    async function getStageDataFromConsolidado(projectId) {
        try {
            console.log(`[getStageDataFromConsolidado] Fetching data for project: ${projectId}`);
            const response = await fetch('../timeline/consolidado_etapas.json');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const consolidadoData = await response.json();
            
            if (!consolidadoData[projectId]) {
                console.warn(`[getStageDataFromConsolidado] No data found for project ID: ${projectId}`);
                return null;
            }
            
            const projectData = consolidadoData[projectId];
            console.log(`[getStageDataFromConsolidado] Loaded data for project:`, projectData);

            // Define the stage order and their corresponding keys
            const stageOrder = [
                { key: 'estudos', name: 'Estudos' },
                { key: 'consulta', name: 'Consulta Pública' },
                { key: 'tcu', name: 'TCU' },
                { key: 'edital', name: 'Edital' },
                { key: 'licitacao', name: 'Licitação' },
                { key: 'contrato', name: 'Contrato' }
            ];

            // Process each stage
            const stages = stageOrder.map(stage => {
                const stageKey = stage.key;
                const situacao = (projectData[`${stageKey}_situacao`] || 'incompleto').toLowerCase();
                const status = projectData[`${stageKey}_status`] || 'Not started';
                const isCompleted = situacao === 'completo';
                const isPending = status.toLowerCase() === 'pending';
                const stageValue = projectData[`${stageKey}_stage`] || '';
                const theme = projectData[`${stageKey}_theme`] || 'General';
                
                // Log para debug
                console.log(`[getStageDataFromConsolidado] Stage: ${stage.name} (${stageKey})`, {
                    situacao,
                    status,
                    isCompleted,
                    isPending,
                    stage: stageValue,
                    theme
                });
                
                return {
                    key: stageKey,
                    name: stage.name,
                    completed: isCompleted,
                    isCurrent: isPending || (status.toLowerCase() === 'in progress'),
                    status: status,
                    stage: stageValue,
                    theme: theme
                };
            });
            
            // Ajusta o estágio atual para o primeiro não concluído
            let hasCurrent = false;
            for (let i = 0; i < stages.length; i++) {
                if (!stages[i].completed && !hasCurrent) {
                    stages[i].isCurrent = true;
                    hasCurrent = true;
                } else if (stages[i].isCurrent && !hasCurrent) {
                    hasCurrent = true;
                } else {
                    stages[i].isCurrent = false;
                }
            }
            
            console.log(`[getStageDataFromConsolidado] Processed stages:`, stages);
            return stages;
            
        } catch (error) {
            console.error('[getStageDataFromConsolidado] Error loading stage data:', error);
            return null;
        }
    }

    // Ordem das fases do projeto
    const PHASES = [
        { key: 'estudos', name: 'Estudos' },
        { key: 'consulta', name: 'Consulta Pública' },
        { key: 'tcu', name: 'TCU' },
        { key: 'edital', name: 'Edital' },
        { key: 'licitacao', name: 'Licitação' },
        { key: 'contrato', name: 'Contrato' }
    ];
    
    // Mapeamento de aliases para nomes de fases
    const phaseAliases = {
        'Análise TCU': 'TCU',
        'Contrato': 'Assinatura do Contrato',
        'Assinatura': 'Assinatura do Contrato',
        'Leilao': 'Leilão',
        'Consulta Publica': 'Consulta Pública',
        'EVTEA': 'Estudos',
    };

    function normalizeMilestone(name) {
        if (!name) return '';
        const key = name.normalize('NFD').replace(/\p{Diacritic}/gu, '').trim();
        const direct = PHASES.find(p => p.normalize('NFD').replace(/\p{Diacritic}/gu, '') === key);
        if (direct) return direct;
        for (const [alias, target] of Object.entries(phaseAliases)) {
            const a = alias.normalize('NFD').replace(/\p{Diacritic}/gu, '');
            if (a.toLowerCase() === key.toLowerCase()) return target;
        }
        // fuzzy contains
        if (/tcu/i.test(name)) return 'TCU';
        if (/edital/i.test(name)) return 'Edital';
        if (/leil(ã|a)o/i.test(name)) return 'Leilão';
        if (/contrat/i.test(name)) return 'Assinatura do Contrato';
        if (/consult/i.test(name)) return 'Consulta Pública';
        if (/estud|evtea/i.test(name)) return 'Estudos';
        return '';
    }

    function buildPhaseStates(details, projectStatus = '') {
        console.log('buildPhaseStates called with details:', details);
        
        // Default state: all phases not completed
        const defaultState = PHASES.map(phase => ({
            key: phase.key,
            name: phase.name,
            completed: false,
            isCurrent: false,
            isDraft: false,
            status: 'Not started'
        }));
        
        if (!details) {
            console.log('No details provided, returning default state');
            return defaultState;
        }

        console.log('Available details keys:', Object.keys(details));
        
        // Map phase names to their corresponding status keys in the details
        const phaseToKeyMap = {
            'Estudos': 'etapa2',
            'Consulta Pública': 'etapa5',
            'TCU': 'etapa8',
            'Edital': 'etapa9',
            'Leilão': 'etapa13',
            'Assinatura do Contrato': 'etapa14'
        };

        // Helper function to normalize status values
        const normalizeStatus = (status) => {
            if (!status) return 'not_started';
            
            const statusStr = String(status).toLowerCase().trim();
            
            // Check for completed statuses
            if (['completed', 'concluído', 'concluido', 'finalizado', 'assinado', 'publicado', 
                 'realizado', 'concluida', 'concluída', 'concluido com sucesso', 'concluída com sucesso'].some(s => statusStr.includes(s))) {
                return 'completed';
            }
            
            // Check for in-progress statuses
            if (['andamento', 'progress', 'em andamento', 'em análise', 'em licitação', 
                 'em implantação', 'em revisão', 'em andamento (execução)', 'em andamento - execução', 
                 'em andamento - análise', 'em andamento - licitação'].some(s => statusStr.includes(s))) {
                return 'in_progress';
            }
            
            // Check for draft statuses
            if (statusStr.includes('rascunho') || statusStr.includes('draft') || statusStr.includes('rasc')) {
                return 'draft';
            }
            
            // Check for error statuses
            if (statusStr.includes('error') || statusStr.includes('erro') || statusStr.includes('falha')) {
                return 'error';
            }
            
            // Default to not started
            return 'not_started';
        };

        // Process each phase
        const result = PHASES.map(phase => {
            const phaseKey = phaseToKeyMap[phase.name] || phase.key;
            let phaseData = details[phaseKey] || details[phase.name] || details[phase.key];
            let status = 'not_started';
            
            // If phase data is not found in the direct properties, try to find it in the timeline array
            if (!phaseData && details.timeline && Array.isArray(details.timeline)) {
                const phaseInTimeline = details.timeline.find(item => 
                    item.milestone && 
                    phase.toLowerCase().includes(item.milestone.toLowerCase())
                );
                if (phaseInTimeline) {
                    phaseData = phaseInTimeline;
                    console.log(`Found phase data in timeline for: ${phase}`, phaseData);
                }
            }
            
            if (phaseData) {
                if (typeof phaseData === 'object' && phaseData !== null) {
                    // Check both status and answer fields from API response
                    status = normalizeStatus(phaseData.status || phaseData.answer || phaseData.estado || '');
                    
                    console.log(`Phase: ${phase} (${phaseKey})`, {
                        phaseData,
                        normalizedStatus: status
                    });
                } else if (typeof phaseData === 'string') {
                    status = normalizeStatus(phaseData);
                }
            } else {
                console.log(`No data found for phase: ${phase} (${phaseKey})`);
            }
            
            // Special case for Assinatura do Contrato - check project status
            if (phase === 'Assinatura do Contrato' && projectStatus) {
                console.log('Checking project status for Assinatura do Contrato:', projectStatus);
                const lowerStatus = String(projectStatus).toLowerCase();
                if (lowerStatus.includes('assinado') || lowerStatus.includes('concluído') || 
                    lowerStatus.includes('finalizado') || lowerStatus.includes('concluido') ||
                    lowerStatus.includes('concluída') || lowerStatus.includes('concluida')) {
                    status = 'completed';
                } else if (lowerStatus.includes('andamento') || lowerStatus.includes('em andamento') ||
                          lowerStatus.includes('em execução') || lowerStatus.includes('em execucao')) {
                    status = 'in_progress';
                } else if (lowerStatus.includes('rascunho') || lowerStatus.includes('draft')) {
                    status = 'draft';
                }
                console.log('Assinatura do Contrato status set to:', status);
            }
            
            return {
                key: phase.key,
                name: phase.name,
                completed: status === 'completed',
                isCurrent: status === 'in_progress',
                isDraft: status === 'draft',
                status: status === 'in_progress' ? 'Em andamento' : 
                        status === 'completed' ? 'Concluído' :
                        status === 'draft' ? 'Rascunho' : 'Não iniciado'
            };
        });
        
        // Find the first phase that's not completed to mark it as current
        let foundCurrent = false;
        for (let i = 0; i < result.length; i++) {
            if (!foundCurrent && !result[i].completed) {
                // Only set as current if it's not already marked as in_progress or draft
                if (result[i].status === 'not_started') {
                    result[i].isCurrent = true;
                    console.log(`Marking phase as current (first incomplete): ${result[i].name}`);
                    foundCurrent = true;
                }
            }
            
            // Clear current status for all other phases
            if (foundCurrent && i > 0) {
                result[i].isCurrent = false;
            }
        }
        
        console.log('Final phase states:', JSON.stringify(result, null, 2));
        return result;
    }

    async function renderProjectDetails(projectId) {
        try {
            console.log('[renderProjectDetails] Rendering project details for:', projectId);
            const project = projectData.find(p => p.id === projectId);
            if (!project) {
                console.error('[renderProjectDetails] Project not found:', projectId);
                return;
            }

            const modalBody = document.getElementById('modal-body');
            if (!modalBody) {
                console.error('[renderProjectDetails] Modal body not found');
                return;
            }
            
            // Show loading state
            modalBody.innerHTML = `
                <div class="flex flex-col items-center justify-center h-64">
                    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"></div>
                    <p class="text-gray-600">Carregando detalhes do projeto...</p>
                </div>`;
            
            // Show modal immediately
            modal.classList.remove('hidden');
            modal.classList.add('flex', 'modal-enter');
            
            // Log project data for debugging
            console.log('[renderProjectDetails] Project data:', project);
            modalContent.classList.remove('modal-leave');

            // Get project data from cache or fallback to project data
            const baseProject = enrichedProjectsCache.get(project.id) || project;
            const details = baseProject.details || {};
            
            // Get phase states - prioritize timeline data from allTimelineProjects
            let phaseStates = [];
            try {
                const sourceId = project.sourceId;
                const projectName = project.name || project.title || '';
                console.log('[renderProjectDetails] Project sourceId:', sourceId, 'name:', projectName);
                
                // Try timeline data first (main source) - pass both GUID and name for fallback matching
                if (sourceId || projectName) {
                    console.log('[renderProjectDetails] Trying to get timeline data using sourceId:', sourceId);
                    phaseStates = getPhaseStatesFromTimelineData(sourceId, projectName);
                    
                    if (phaseStates && phaseStates.length > 0) {
                        console.log('[renderProjectDetails] Successfully loaded phase states from timeline data:', phaseStates);
                    }
                }
                
                // If timeline data not available, try consolidado_etapas.json
                if (!phaseStates || phaseStates.length === 0) {
                    console.warn('[renderProjectDetails] No timeline data available, trying consolidado_etapas.json');
                    phaseStates = await getStageDataFromConsolidado(projectId);
                    
                    if (phaseStates && phaseStates.length > 0) {
                        console.log('[renderProjectDetails] Successfully loaded phase states from consolidado_etapas.json:', phaseStates);
                    }
                }
                
                // Final fallback
                if (!phaseStates || phaseStates.length === 0) {
                    console.warn('[renderProjectDetails] No data available, falling back to buildPhaseStates');
                    phaseStates = buildPhaseStates(details, project.status || '');
                }
            } catch (error) {
                console.error('[renderProjectDetails] Error loading stage data:', error);
                const sourceId = project.sourceId;
                const projectName = project.name || project.title || '';
                if (sourceId || projectName) {
                    console.log('[renderProjectDetails] Trying timeline data as fallback');
                    phaseStates = getPhaseStatesFromTimelineData(sourceId, projectName);
                }
                
                if (!phaseStates || phaseStates.length === 0) {
                    console.warn('[renderProjectDetails] Using buildPhaseStates');
                    phaseStates = buildPhaseStates(details, project.status || '');
                }
            }
            
            // Calculate progress
            const completedCount = phaseStates.filter(p => p.completed).length;
            const totalPhases = phaseStates.length;
            
            // Calculate progress width based on completed phases
            let progressWidth = '0%';
            if (totalPhases > 1) {
                // Calculate the position of the last completed phase
                let lastCompletedIndex = -1;
                for (let i = 0; i < phaseStates.length; i++) {
                    if (phaseStates[i].completed) {
                        lastCompletedIndex = i;
                    } else {
                        break;
                    }
                }
                
                // If no phases are completed, progress is 0%
                if (lastCompletedIndex < 0) {
                    progressWidth = '0%';
                } 
                // If all phases are completed, progress is 100%
                else if (lastCompletedIndex >= totalPhases - 1) {
                    progressWidth = '100%';
                } 
                // Calculate progress based on the last completed phase
                else {
                    progressWidth = `${(lastCompletedIndex / (totalPhases - 1)) * 100}%`;
                }
            }
                
            console.log('[renderProjectDetails] Progress calculation:', {
                completedCount,
                totalPhases,
                progressWidth,
                phaseStates: phaseStates.map(p => ({
                    name: p.name,
                    completed: p.completed,
                    isCurrent: p.isCurrent,
                    status: p.status
                }))
            });
            
            // Generate timeline HTML with proper status indicators
            const timelineHTML = `
                <div class="phase-timeline phase-timeline--compact">
                    <div class="phase-line"></div>
                    <div class="phase-line-completed" style="width: ${progressWidth}"></div>
                    <div class="phase-items">
                        ${phaseStates.map((phase, index) => {
                            const { name, completed, isCurrent, status } = phase;
                            
                            // Determine the status class and icon
                            let statusClass = '';
                            let statusIcon = '';
                            let statusText = status;
                            
                            if (completed) {
                                statusClass = 'completed';
                                statusIcon = '✓';
                                statusText = 'Concluído';
                            } else if (isCurrent) {
                                statusClass = 'current';
                                statusIcon = '→';
                                statusText = status || 'Em andamento';
                            } else {
                                statusText = 'Pendente';
                            }
                            
                            // Log phase data for debugging
                            console.log(`[renderProjectDetails] Rendering phase ${index + 1}/${phaseStates.length}:`, {
                                name,
                                completed,
                                isCurrent,
                                status,
                                statusClass,
                                statusText
                            });
                            
                            return `
                                <div class="phase-item group" data-phase="${name.toLowerCase().replace(/\s+/g, '-')}" 
                                     data-status="${statusClass || 'pending'}">
                                    <div class="phase-dot ${statusClass}" 
                                         title="${name}: ${statusText}">
                                        ${statusIcon}
                                    </div>
                                    <div class="phase-label ${statusClass}">
                                        <span class="font-medium">${name}</span>
                                        <div class="text-xs opacity-80 mt-0.5">${statusText}</div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                <style>
                    /* Timeline container */
                    .phase-timeline {
                        position: relative;
                        margin: 2rem 0;
                        padding: 0 1rem;
                    }
                    
                    .phase-timeline--compact {
                        margin: 1.5rem 0;
                    }
                    
                    /* Base line (background) */
                    .phase-line {
                        position: absolute;
                        top: 16px;
                        left: 10%;
                        right: 10%;
                        height: 4px;
                        background-color: #e5e7eb;
                        border-radius: 2px;
                    }
                    
                    /* Completed progress line */
                    .phase-line-completed {
                        position: absolute;
                        top: 16px;
                        left: 10%;
                        height: 4px;
                        background-color: #10B981;
                        border-radius: 2px;
                        transition: width 0.5s ease-in-out;
                        z-index: 1;
                    }
                    
                    /* Container for phase items */
                    .phase-items {
                        display: flex;
                        justify-content: space-between;
                        position: relative;
                        z-index: 2;
                    }
                    
                    /* Individual phase item */
                    .phase-item {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        position: relative;
                        min-width: 100px;
                        padding: 0 0.5rem;
                    }
                    
                    /* Phase dot */
                    .phase-dot {
                        width: 24px;
                        height: 24px;
                        border-radius: 50%;
                        background-color: #e5e7eb;
                        border: 3px solid white;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.75rem;
                        font-weight: bold;
                        color: white;
                        position: relative;
                        z-index: 3;
                        transition: all 0.3s ease;
                        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                    }
                    
                    /* Completed state */
                    .phase-dot.completed {
                        background-color: #10B981;
                        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
                    }
                    
                    /* Current/active state */
                    .phase-dot.current {
                        background-color: #3B82F6;
                        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
                        transform: scale(1.2);
                    }
                    
                    /* Phase label */
                    .phase-label {
                        margin-top: 0.75rem;
                        font-size: 0.75rem;
                        text-align: center;
                        color: #6B7280;
                        font-weight: 500;
                        transition: all 0.3s ease;
                        max-width: 100%;
                        word-break: break-word;
                    }
                    
                    .phase-label.completed {
                        color: #10B981;
                        font-weight: 600;
                    }
                    
                    .phase-label.current {
                        color: #3B82F6;
                        font-weight: 700;
                    }
                    
                    /* Tooltip for phase item */
                    .phase-item:hover .phase-label {
                        color: #1F2937;
                        font-weight: 600;
                    }
                    
                    /* Responsive adjustments */
                    @media (max-width: 1024px) {
                        .phase-item {
                            min-width: 80px;
                        }
                        
                        .phase-label {
                            font-size: 0.7rem;
                        }
                    }
                    
                    @media (max-width: 768px) {
                        .phase-timeline {
                            padding: 0 0.5rem;
                        }
                        
                        .phase-item {
                            min-width: 60px;
                        }
                        
                        .phase-dot {
                            width: 20px;
                            height: 20px;
                            font-size: 0.6rem;
                        }
                        
                        .phase-label {
                            font-size: 0.65rem;
                            margin-top: 0.5rem;
                        }
                    }
                    
                    @media (max-width: 480px) {
                        .phase-timeline {
                            margin: 1.5rem 0 3rem;
                        }
                        
                        .phase-item {
                            min-width: 40px;
                            padding: 0 0.25rem;
                        }
                        
                        .phase-dot {
                            width: 18px;
                            height: 18px;
                            font-size: 0.5rem;
                        }
                        
                        .phase-label {
                            font-size: 0.6rem;
                            position: absolute;
                            top: 100%;
                            margin-top: 0.5rem;
                            white-space: nowrap;
                            transform: rotate(-45deg);
                            transform-origin: top left;
                            left: 50%;
                            margin-left: -10px;
                            width: 80px;
                            text-align: left;
                        }
                        
                        .phase-label.completed,
                        .phase-label.current {
                            transform: rotate(-45deg) translateX(10px);
                        }
                    }
                </style>
            `;

            // Generate map HTML if coordinates exist
            const mapHtml = project.coordinates ? `
                <div class="mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Localização</h3>
                    <div class="h-64 w-full rounded-lg overflow-hidden border border-gray-200">
                        <iframe 
                            width="100%" 
                            height="100%" 
                            frameborder="0" 
                            scrolling="no" 
                            marginheight="0" 
                            marginwidth="0" 
                            src="${project.mapUrl}">
                        </iframe>
                    </div>
                    <p class="text-sm text-gray-500 mt-2">Coordenadas: ${project.coordinates.lat.toFixed(4)}, ${project.coordinates.lng.toFixed(4)}</p>
                </div>
            ` : '';

            // Update modal content with all the data
            modalBody.innerHTML = `
                <div class="space-y-6">
                    <!-- Cabeçalho do Projeto -->
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm text-gray-500">${project.sector || 'Setor não especificado'}</p>
                                <h2 class="text-2xl font-bold text-gray-900 mt-1">${project.name || 'Projeto sem nome'}</h2>
                            </div>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${
                                project.statusColor === 'green' ? 'bg-green-100 text-green-800' : 
                                project.statusColor === 'red' ? 'bg-red-100 text-red-800' : 
                                'bg-yellow-100 text-yellow-800'
                            }">
                                ${project.status || 'Status não disponível'}
                            </span>
                        </div>
                        
                        <!-- Linha do Tempo -->
                        <div class="mt-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Etapas do Projeto</h3>
                            ${timelineHTML}
                        </div>
                        
                        <!-- Seção de Detalhes -->
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Coluna 1: Descrição -->
                            <div class="md:col-span-2 space-y-4">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Descrição</h3>
                                    <p class="text-gray-700">${project.details?.description || 'Descrição não disponível'}</p>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Situação Atual</h3>
                                        <p class="text-gray-700">${project.details?.currentSituation || 'Informação não disponível'}</p>
                                    </div>
                                    
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Próximos Passos</h3>
                                        <p class="text-gray-700">${project.details?.nextSteps || 'Informação não disponível'}</p>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Pontos de Atenção</h3>
                                    <ul class="list-disc list-inside space-y-1 text-gray-700">
                                        ${Array.isArray(project.details?.risks) && project.details.risks.length > 0 
                                            ? project.details.risks.map(risk => `<li>${risk}</li>`).join('')
                                            : '<li>Nenhum ponto de atenção identificado</li>'}
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Coluna 2: Mapa -->
                            <div class="space-y-4">
                                ${project.coordinates ? `
                                <div class="h-64 w-full rounded-lg overflow-hidden border border-gray-200">
                                    <iframe 
                                        width="100%" 
                                        height="100%" 
                                        frameborder="0" 
                                        scrolling="no" 
                                        marginheight="0" 
                                        marginwidth="0" 
                                        src="${project.mapUrl}">
                                    </iframe>
                                    <p class="text-sm text-gray-500 mt-2">Coordenadas: ${project.coordinates.lat.toFixed(4)}, ${project.coordinates.lng.toFixed(4)}</p>
                                </div>` : `
                                <div class="bg-gray-100 rounded-lg h-64 flex items-center justify-center text-gray-500">
                                    <div class="text-center p-6">
                                        <i class="fas fa-map-marked-alt text-4xl mb-2 text-gray-300"></i>
                                        <p>Localização não disponível</p>
                                    </div>
                                </div>`}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Dispara enriquecimento em background (não bloqueia abertura do modal)
            if (!enrichedProjectsCache.has(project.id)) {
                enrichProjectWithQuestions(project)
                    .then((enrichedProject) => {
                        console.log('Project enriched successfully:', enrichedProject);
                        enrichedProjectsCache.set(project.id, enrichedProject);
                        // Atualiza a visualização se o modal ainda estiver aberto para este projeto
                        if (document.querySelector(`#project-${project.id}`)) {
                            renderProjectDetails(project.id);
                        }
                    })
                    .catch(err => {
                        console.warn('Falha ao enriquecer projeto em background:', err?.message || err);
                    });
            }
        } catch (error) {
            console.error('Error rendering project details:', error);
        }
    }

    function hideModal() {
        modalContent.classList.add('modal-leave');
        modal.classList.add('modal-leave');
        setTimeout(() => {
            modal.classList.add('hidden');
            modal.classList.remove('flex', 'modal-enter', 'modal-leave');
        }, 300);
    }
    
    function updateView(sector) {
        activeSector = sector;
        if (meetingMode) {
            renderSidebar();
            renderMeetingView();
            return;
        }
        if(sector === 'Todos') {
            overviewSection.classList.remove('hidden');
            sectionTitle.textContent = "Visão Geral";
            sectionSubtitle.textContent = "Explore os projetos de infraestrutura do Brasil.";
        } else {
            overviewSection.classList.add('hidden');
            sectionTitle.textContent = `Setor: ${sector}`;
            const projectCount = projectData.filter(p => p.sector === sector).length;
            sectionSubtitle.textContent = `Encontrado(s) ${projectCount} projeto(s).`;
        }
        renderSidebar();
        renderProjects(sector);
    }
    
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            hideModal();
        }
    });

    // Restore UI event listeners
    sidebarNav.addEventListener('click', (e) => {
        const link = e.target.closest('a');
        if (!link) return;
        e.preventDefault();
        try {
            const action = link.getAttribute('data-action');
            if (action === 'meeting') {
                meetingMode = true;
                renderSidebar();
                renderMeetingView();
                return;
            }
            const sector = link.getAttribute('data-sector');
            if (sector) {
                // Leaving meeting mode when choosing a sector
                meetingMode = false;
                updateView(sector);
            }
        } catch (err) {
            console.error('Sidebar click failed:', err);
            alert('Erro ao processar o clique. Atualize a página e tente novamente.');
        }
    });

    projectsGrid.addEventListener('click', (e) => {
        const card = e.target.closest('.project-card');
        if (card && card.dataset.id) {
            renderProjectDetails(card.dataset.id);
        }
    });

    closeModalBtn.addEventListener('click', hideModal);

    (async () => {
        // Optional loading state
        overviewSection.innerHTML = '<div class="bg-white p-6 rounded-xl shadow-md text-gray-500">Carregando dados...</div>';
        await loadData();
        renderOverviewChart();
        updateView('Todos');
    })();
});
</script>
    <script src="project_timeline.js"></script>
</body>
</html>